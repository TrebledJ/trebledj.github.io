async function InfiniteLoader(n){const t=n.data,e=n.items.num||10,o=n.items.after||e,i=n.html||(n=>n),r=n.append||".post-list";if(!t)return console.error("no data file specified");if(!["string","function"].includes(typeof i))return console.error("params.html should be string or function");if(!r)return console.error("no HTML element to insert to");let s=!1,f=!0,c=0;const l=await fetch(t),a=await l.json(),u=Math.min(n.items.max||Number.MAX_SAFE_INTEGER,a.length);function d(n){if(!f)return;s=!0;const t=Math.min(n,u-c);for(let n=0;n<t;n++)p(c),c++;if(c>=u)return f=!1,s=!1,void $(".infinite-spinner").fadeOut();s=!1}function p(n){const t=a[n];let e=i;"function"==typeof i?e=i(t,n):"string"==typeof i||console.error("unrecognised html generator type:",typeof i),$(e).appendTo(r)}d(e),$(".infinite-spinner").length<1&&(f=!1),$(window).on("scroll",(()=>{if(!f||s||!a||c>=a.length)return;100*$(window).scrollTop()/($(document).height()-$(window).height())>90&&d(o)}))}