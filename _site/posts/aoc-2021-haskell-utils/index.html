<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>AOC 2021 Haskell Utils - TrebledJ's Pages</title><meta name="description" content="An introduction and walkthrough of my haskell utilities."><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="trebledj,aoc 2021 haskell utils,an introduction and walkthrough of my haskell utilities.,programming,aoc,haskell,functional"><meta name="robots" content="index,follow"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'sha256-Wv9Tjjg7Y7X5sBbP5AXqAQJA6+eewSRUjoPhNczfpnM=' 'sha256-FBtdNYnNdsvTKcrNIznI+jwGwhW3pNA5x/yQUw8jOPA=' 'sha256-5e8R4YC3Atf/5McNMkFk4TZYUtMEItdy9ikt1KUoPSc=' 'sha256-qlkNkQyGC5u9Brt4wwVi0MsPO/hVdrz3rzXuWYIkAbM=' 'sha256-J+ryCgKrW+QOH4xdCyPd6R5W3u9wJkXayR7KvtlnCnQ=' 'sha256-kQnTuA4pPVYgo0bCEGXSCEkD+CzMbRrhb5Cn58IydSA=' 'sha256-Deekn20h+++EarpL0nFQLX7JSJv7s/2W9f988ZFAh14=' comments.trebledj.me code.jquery.com cdn.jsdelivr.net gist.github.com static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' comments.trebledj.me cdn.jsdelivr.net cdnjs.cloudflare.com github.githubassets.com; font-src 'self' data: comments.trebledj.me cdn.jsdelivr.net cdnjs.cloudflare.com; img-src 'self' data: comments.trebledj.me; frame-src 'self' *.soundcloud.com; connect-src 'self' comments.trebledj.me wss://comments.trebledj.me cloudflareinsights.com formcarry.com;"><link href="/feeds/posts.xml" rel="alternate" title="RSS Feed for TrebledJ's Pages" type="application/rss+xml"><meta property="og:site_name" content="TrebledJ's Pages"><meta property="og:type" content="article"><meta property="og:title" content="AOC 2021 Haskell Utils - TrebledJ's Pages"><meta property="twitter:title" content="AOC 2021 Haskell Utils - TrebledJ's Pages"><meta property="og:description" content="An introduction and walkthrough of my haskell utilities.

Haskell, despite its relatively low popularity, is quite up to speed on language features and tooling (unlike–cough cough–some other languages). One of these features is being able to separate and..."><meta property="twitter:description" content="An introduction and walkthrough of my haskell utilities.

Haskell, despite its relatively low popularity, is quite up to speed on language features and tooling (unlike–cough cough–some other languages). One of these features is being able to separate and..."><meta property="og:url" content="https://trebledj.me/posts/aoc-2021-haskell-utils/"><meta name="twitter:card" content="summary_large_image"><meta property="og:image" content="https://trebledj.me/img/posts/programming/aoc-2021/assets/recycle-hs-utils-771w.webp"><meta property="twitter:image" content="https://trebledj.me/img/posts/programming/aoc-2021/assets/recycle-hs-utils-771w.webp"><meta property="article:published_time" content="2022-08-09T00:00:00.000Z"><meta property="article:modified_time" content="2022-08-09T00:00:00.000Z"><meta property="article:author" content="TrebledJ"><meta property="article:section" content="programming"><meta property="article:tag" content="programming"><meta property="article:tag" content="aoc"><meta property="article:tag" content="haskell"><meta property="article:tag" content="functional"><script type="application/ld+json">{"@context": "https://schema.org","@type": "WebSite","name": "TrebledJ's Pages","url": "https://trebledj.me"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/cb/css/icons-6e60ae6c5e022aba.css"><link rel="stylesheet" href="/cb/x2ljFSZBUH.css" media="print"><style></style><script>document.querySelectorAll('link[media|="print"]').forEach(e=>{e.addEventListener("load",()=>e.media="all"),e.sheet&&(e.media="all")})</script><script>const defaultTheme="dark";let icon=void 0;var reloadDisqus=void 0;function modeInit(){var e=localStorage.getItem("theme");setMode("dark"===e?"dark":"light"===e?"light":defaultTheme)}function modeInitIcon(){icon=document.getElementById("mode-switch-icon"),isLightTheme()&&(icon.classList.remove("fa-moon"),icon.classList.add("fa-sun"),icon.classList.add("mode-switch-transform"))}function isLightTheme(){return"light"===localStorage.getItem("theme")}function modeSwitcher(){var e=localStorage.getItem("theme");"dark"===e?(setMode("light"),reloadDisqus&&reloadDisqus()):"light"===e?(setMode("dark"),reloadDisqus&&reloadDisqus()):setMode(defaultTheme)}function setMode(e){"dark"===e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):"light"===e&&(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")),icon&&(icon.classList.toggle("fa-moon"),icon.classList.toggle("fa-sun"),icon.classList.toggle("mode-switch-transform"))}modeInit(),document.addEventListener("DOMContentLoaded",()=>{document.getElementById("mode-switch").addEventListener("click",()=>{modeSwitcher()})})</script><script defer src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><link rel="stylesheet" href="/css/comments.css"><link rel="icon" href="/favicon.ico" type="image/x-icon"></head><body><header><nav class="navbar navbar-expand-md py-2"><div class="container-fluid justify-content-between align-items-center"><button aria-controls="navbar-container" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler shadow-none" data-bs-target="#navbar-container" data-bs-toggle="collapse" type="button"><span id="navbar-toggler-icon"><i class="fas fa-bars"></i></span></button> <a class="navbar-brand no-decoration" href="/">TrebledJ's Pages</a><div class="navbar-collapse collapse" id="navbar-container"><ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/posts">Posts</a></li><li class="nav-item"><a class="nav-link" href="/music">Music</a></li></ul><ul class="navbar-nav"><li><a class="nav-link me-2" data-bs-toggle="modal" data-bs-target="#search-modal" aria-label="Search..." role="button"><i class="fas fa-search nav-icon"></i></a></li><li><a class="nav-link" id="mode-switch" aria-label="Theme Switch" role="button"><i id="mode-switch-icon" class="fas fa-moon nav-icon"></i></a><script>modeInitIcon()</script></li></ul></div></div></nav><div id="scroll-progress-bar"></div></header><div id="top-of-the-morning-to-you"></div><div id="search-modal" class="modal fade wide-modal" aria-hidden="true" aria-label="Search" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header pb-2 d-flex flex-row justify-content-between"><div class="container-fluid ps-0" id="search-box-container"><input type="text" autofocus class="container-fluid" id="search-box" placeholder="Search"> <i class="fas fa-search"></i></div><button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button></div><div class="modal-body" id="search-results-list"></div></div></div></div><button id="btn-back-to-top" class="btn btn-lg" type="button" aria-label="Back to Top"><i class="fas fa-arrow-up"></i></button><div id="btn-mobile-toc" class="dropup"><button type="button" class="btn btn-lg" data-bs-toggle="dropdown" aria-label="Content"><i class="fas fa-list-ul"></i></button><ul class="dropdown-menu toc-container"><li><nav class="toc"><ol><li><a href="#list-utilities">List Utilities</a><ol><li><a href="#count-a-bool-a-int">count :: (a -&gt; Bool) -&gt; [a] -&gt; Int</a></li><li><a href="#firstby-lastby-a-bool-a-a">firstBy, lastBy :: (a -&gt; Bool) -&gt; [a] -&gt; a</a></li><li><a href="#frombinary-string-int">fromBinary :: String -&gt; Int</a></li></ol></li><li><a href="#debug-utilities">Debug Utilities</a><ol><li><a href="#show-a-string-a-string">(++$) :: (Show a) =&gt; String -&gt; a -&gt; String</a></li><li><a href="#trace-show-a-a-a">trace' :: (Show a) =&gt; a -&gt; a</a></li></ol></li><li><a href="#advanced-utilities">Advanced Utilities</a><ol><li><a href="#counter-hashable-a-eq-a-a-m-hashmap-a-int">counter :: (Hashable a, Eq a) =&gt; [a] -&gt; M.HashMap a Int</a></li></ol></li><li><a href="#parser-utilities">Parser Utilities</a><ol><li><a href="#digits-num-i-read-i-parser-i">digits :: (Num i, Read i) =&gt; Parser i</a></li><li><a href="#integer-num-i-read-i-show-i-parser-i">integer :: (Num i, Read i, Show i) =&gt; Parser i</a></li></ol></li><li><a href="#aoc-specific-utilities">AOC-specific Utilities</a><ol><li><a href="#defaultmain">defaultMain</a></li><li><a href="#criterionmain">criterionMain</a></li></ol></li></ol></nav></li></ul></div><div class="main-container"><div class="page-container col-lg-12"><div class="container-lg px-0"><article class="jw-100 post-article" itemscope itemtype="http://schema.org/BlogPosting"><div class="row flex-row-reverse gx-lg-5"><div class="col-lg-4 d-none d-lg-block"><div class="dim-deep"><div class="metadata-container d-flex"><div class="d-flex flex-row align-items-center"><span><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-posted-date">Posted on <span itemprop="datePublished" content="2022-08-09T08:00:00.000+08:00">2022‑08‑09</span></span></div><div class="d-flex flex-row align-items-center"></div><div class="d-flex flex-row align-items-center"><span><i class="far fa-clock post-meta-icon me-1"></i> </span><span class="fs-7">8 minute read</span></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><span><i class="fas fa-tag post-meta-icon me-1 mt-2"></i></span><div class="tag-list d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/aoc/" itemprop="keywords">aoc</a> </span><span><a class="jtag" href="/tags/haskell/" itemprop="keywords">haskell</a> </span><span><a class="jtag" href="/tags/functional/" itemprop="keywords">functional</a></span></div></div></div><br><div id="toc-sidebar" class="sticky-right dim-deep dim-if-dark"><div class="toc-container"><span><a id="toc-content" href="javascript:void(0);">Content</a></span><nav class="toc"><ol><li><a href="#list-utilities">List Utilities</a><ol><li><a href="#count-a-bool-a-int">count :: (a -&gt; Bool) -&gt; [a] -&gt; Int</a></li><li><a href="#firstby-lastby-a-bool-a-a">firstBy, lastBy :: (a -&gt; Bool) -&gt; [a] -&gt; a</a></li><li><a href="#frombinary-string-int">fromBinary :: String -&gt; Int</a></li></ol></li><li><a href="#debug-utilities">Debug Utilities</a><ol><li><a href="#show-a-string-a-string">(++$) :: (Show a) =&gt; String -&gt; a -&gt; String</a></li><li><a href="#trace-show-a-a-a">trace' :: (Show a) =&gt; a -&gt; a</a></li></ol></li><li><a href="#advanced-utilities">Advanced Utilities</a><ol><li><a href="#counter-hashable-a-eq-a-a-m-hashmap-a-int">counter :: (Hashable a, Eq a) =&gt; [a] -&gt; M.HashMap a Int</a></li></ol></li><li><a href="#parser-utilities">Parser Utilities</a><ol><li><a href="#digits-num-i-read-i-parser-i">digits :: (Num i, Read i) =&gt; Parser i</a></li><li><a href="#integer-num-i-read-i-show-i-parser-i">integer :: (Num i, Read i, Show i) =&gt; Parser i</a></li></ol></li><li><a href="#aoc-specific-utilities">AOC-specific Utilities</a><ol><li><a href="#defaultmain">defaultMain</a></li><li><a href="#criterionmain">criterionMain</a></li></ol></li></ol></nav><hr></div><div class="toc-link-container"><span><a href="#related">Related Posts</a></span></div><div class="toc-link-container"><span><a href="#comments">Comments</a></span></div></div></div><div class="col-lg-8 post-body-container"><div class="article-header"><h1 class="post-title" itemprop="name headline">AOC 2021 Haskell Utils</h1><p class="post-desc" itemprop="alternativeHeadline">An introduction and walkthrough of my haskell utilities.</p><div class="d-lg-none dim-deep"><div class="metadata-container d-flex"><div class="d-flex flex-row align-items-center"><span><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-posted-date">Posted on <span itemprop="datePublished" content="2022-08-09T08:00:00.000+08:00">2022‑08‑09</span></span></div><div class="d-flex flex-row align-items-center"></div><div class="d-flex flex-row align-items-center"><span><i class="far fa-clock post-meta-icon me-1"></i> </span><span class="fs-7">8 minute read</span></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><span><i class="fas fa-tag post-meta-icon me-1 mt-2"></i></span><div class="tag-list d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/aoc/" itemprop="keywords">aoc</a> </span><span><a class="jtag" href="/tags/haskell/" itemprop="keywords">haskell</a> </span><span><a class="jtag" href="/tags/functional/" itemprop="keywords">functional</a></span></div></div></div></div><hr><div class="post-body text-content" itemprop="articleBody text"><p>Haskell, despite its relatively low popularity, is quite up to speed on language features and tooling (unlike–<em>cough cough</em>–some other languages). One of these features is being able to separate and organise files into modules, encouraging clean code practices and cleaner development.</p><p>In Advent of Code (AOC) 2021, I found it useful to separate common functions into a <a href="https://github.com/TrebledJ/aoc/blob/master/2021/haskell/src/Utils.hs" rel="noreferrer" target="_blank">Utils.hs</a> file. After all, to make our environments cleaner we should reduce, reuse, and recycle.</p><p><a class="lightbox-single" title="" href="/img/posts/programming/aoc-2021/assets/recycle-hs-utils-771w.webp"><img class="mb-2 rw center jw-65" src="/img/posts/programming/aoc-2021/assets/recycle-hs-utils-771w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 771 / 499" alt="Throwing Haskell functions into a recycling bin." title="" srcset="/img/posts/programming/aoc-2021/assets/recycle-hs-utils-256w.webp 256w, /img/posts/programming/aoc-2021/assets/recycle-hs-utils-512w.webp 512w, /img/posts/programming/aoc-2021/assets/recycle-hs-utils-771w.webp 771w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 771px"></a></p><p>I'll introduce some basic utilities first before moving on to advanced ones. However, I won't make too many attempts to teach the basics. For that you may refer yourself to <a href="https://learnyouahaskell.github.io/chapters" rel="noreferrer" target="_blank">Learn You a Haskell</a> (LYAH), which provides a very nice tutorial into Haskell.</p><h2 id="list-utilities" tabindex="-1"><a class="md-anchor" href="#list-utilities" aria-hidden="true"></a> List Utilities</h2><h3 id="count-a-bool-a-int" tabindex="-1"><a class="md-anchor" href="#count-a-bool-a-int" aria-hidden="true"></a> <code>count :: (a -&gt; Bool) -&gt; [a] -&gt; Int</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">count</span> <span class="token hvariable">p</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token punctuation">(</span><span class="token builtin">filter</span> <span class="token hvariable">p</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Typically, the situation arises when we need to count the number of elements in a list. For example, "count the number of occurrences of <code>3</code> in <code>[1, 2, 3, 4, 3, 3, 5]</code>". To do this, we'll <code>filter</code> the matching elements, then take the <code>length</code> of the filtered list to count the number of matches.</p><p>If you're new to Haskell, you're probably wondering "what the heck are the jumble of symbols on the first line?" It's the type signature! We can roughly translate it as follows:</p><ul><li><code>count</code>: The <code>count</code> function...</li><li><code>::</code>: has the following type...<ul><li><code>(a -&gt; Bool)</code>: it takes a predicate; here, a function which itself takes a generic type <code>a</code> and returns a boolean...</li><li><code>-&gt;</code>: then...<ul><li><code>[a]</code>: it takes a list of generic objects (all the same type as the previous <code>a</code>!)...</li><li><code>-&gt;</code>: then...<ul><li><code>Int</code>: it returns a 32-bit integer.</li></ul></li></ul></li></ul></li></ul><p>Well, this isn't entirely accurate due to currying, but it's a decent mental model.</p><p>In the type signature, <code>a</code> is a generic type, similar to template parameters in C++ and generics in Java/Scala (although the convention in those languages is to use <code>T</code> and <code>A</code>).</p><div class="code-toolbar"><pre class="language-cpp" tabindex="0"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">int32_t</span> <span class="token function">count</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token operator">&gt;</span> p<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token keyword">const</span><span class="token operator">&amp;</span> xs<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">C++</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><div class="code-toolbar"><pre class="language-scala" tabindex="0"><code class="language-scala"><span class="token keyword">def</span> count<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">(</span>p<span class="token operator">:</span> A <span class="token keyword">=&gt;</span> <span class="token builtin">Boolean</span><span class="token punctuation">,</span> xs<span class="token operator">:</span> List<span class="token punctuation">[</span>A<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">Scala</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>In Haskell, there is actually a more concise way to write <code>count</code>:</p><div class="code-toolbar"><pre class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">count</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">count</span> <span class="token hvariable">p</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token operator">.</span> <span class="token builtin">filter</span> <span class="token hvariable">p</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">Haskell</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><div class="alert alert-info d-flex align-items-start"><i class="fas fa-bolt ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p><code>.</code> stands for function composition, similar to those in math ($f \circ g$). On the practical side, it applies the right-hand-side function first, followed by the left-hand-side function. Programs are all about combining small operations to form bigger ones, so you'll see <code>.</code> being used a lot in purely functional code.</p></div></div><p>In the code above, you can think of <code>count</code> as taking one parameter <code>p :: a -&gt; Bool</code> and returning a function <code>[a] -&gt; Int</code> which is the composition of <code>length</code> and <code>filter p</code>. It may help if I refine the type signature, so that it's clear that it returns <code>[a] -&gt; Int</code>:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">count</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>So we can actually think of <code>count</code> as having several types:</p><ol><li>it takes a <code>(a -&gt; Bool)</code>, a <code>[a]</code>, and returns an <code>Int</code>; or</li><li>it takes a <code>(a -&gt; Bool)</code> and returns a <code>([a] -&gt; Int)</code>.</li></ol><p>Either way the function does the same thing. Under the hood, however, the Haskell compiler thinks using the latter version. This phenomenon is known as currying and its flexibility is quite useful for creating partial functions.</p><h3 id="firstby-lastby-a-bool-a-a" tabindex="-1"><a class="md-anchor" href="#firstby-lastby-a-bool-a-a" aria-hidden="true"></a> <code>firstBy, lastBy :: (a -&gt; Bool) -&gt; [a] -&gt; a</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">firstBy</span> <span class="token hvariable">p</span> <span class="token operator">=</span> <span class="token builtin">head</span> <span class="token operator">.</span> <span class="token builtin">filter</span> <span class="token hvariable">p</span>
<span class="token hvariable">lastBy</span> <span class="token hvariable">p</span> <span class="token operator">=</span> <span class="token builtin">last</span> <span class="token operator">.</span> <span class="token builtin">filter</span> <span class="token hvariable">p</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Both <code>firstBy</code> and <code>lastBy</code> have similar function types: they take a predicate <code>(a -&gt; Bool)</code>, a list <code>[a]</code>, and return an element <code>a</code>. You can probably guess what these do by just looking at the names and types.</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">firstBy</span> <span class="token builtin">even</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token number">2</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">lastBy</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token number">3</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p><code>even</code> checks if a number is even. <code>&lt; 4</code> checks if a number is less than 4. We <em>could</em> be more explicit: <code>lessThan4 x = x &lt; 4</code>; but <code>&lt; 4</code> is just more concise.</p><p>These functions are useful when we've generated a list of possible solutions, but only want the first or last element which meets some criteria.</p><h3 id="frombinary-string-int" tabindex="-1"><a class="md-anchor" href="#frombinary-string-int" aria-hidden="true"></a> <code>fromBinary :: String -&gt; Int</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">fromBinary</span> <span class="token operator">=</span> <span class="token builtin">foldl</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">acc</span> <span class="token hvariable">d</span> <span class="token operator">-&gt;</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token hvariable">acc</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token hvariable">d</span><span class="token punctuation">)</span> <span class="token number">0</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>As you could guess from the type signature, this function converts a binary string to the corresponding base-10 integer. You'll notice that we didn't give a parameter name for <code>String</code>, and that's because we curried <code>foldl</code> (which takes up to 3 parameters).</p><p>Folds in functional programming are powerful and useful because they are generalised/abstract constructs. And like all generalised/abstract constructs, folds take a bit of time to understand. If you know how <code>reduce</code> works, <code>foldl</code> is similar. You can learn more about folds in <a href="https://learnyouahaskell.github.io/higher-order-functions#folds" rel="noreferrer" target="_blank">LYAH's chapter on folds</a>.</p><p>To illustrate <code>fromBinary</code> in action:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">fromBinary</span> <span class="token string">"10"</span> 
    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'0'</span>
    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'0'</span>
    <span class="token operator">=</span> <span class="token number">2</span>

<span class="token hvariable">fromBinary</span> <span class="token string">"1011"</span> 
    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span>
    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span>
    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span>
    <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">digitToInt</span> <span class="token char string">'1'</span>
    <span class="token operator">=</span> <span class="token number">11</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p><code>digitToInt</code> is a function defined in <code>Data.Char</code> which converts a char digit (<code>'0'..'9'</code>) to the corresponding integer <code>0..9</code>.</p><h2 id="debug-utilities" tabindex="-1"><a class="md-anchor" href="#debug-utilities" aria-hidden="true"></a> Debug Utilities</h2><p>Debugging in the functional world is slightly more nuanced than debugging in the imperative world. Haskell's <code>Debug.Trace</code> library—with its signature function <code>trace</code>—allows us to print messages to standard output, bypassing the restrictions of pure functions. Some examples of <code>trace</code> in action:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">hello</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span>
<span class="token hvariable">hello</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token hvariable">trace</span> <span class="token string">"trace says 'hello'"</span> <span class="token hvariable">x</span>

<span class="token hvariable">foo</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">foo</span> <span class="token hvariable">n</span> <span class="token hvariable">s</span> <span class="token operator">|</span> <span class="token hvariable">trace</span> <span class="token punctuation">(</span><span class="token string">"int: "</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">n</span> <span class="token operator">++</span> <span class="token string">";  string: "</span> <span class="token operator">++</span> <span class="token hvariable">s</span><span class="token punctuation">)</span> <span class="token constant">False</span> <span class="token operator">=</span> <span class="token builtin">undefined</span>
<span class="token hvariable">foo</span> <span class="token hvariable">n</span> <span class="token hvariable">s</span> <span class="token operator">=</span> <span class="token hvariable">n</span> <span class="token operator">+</span> <span class="token builtin">length</span> <span class="token hvariable">s</span>

<span class="token comment">--</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">hello</span> <span class="token string">"world"</span>
<span class="token hvariable">trace</span> <span class="token hvariable">says</span> '<span class="token hvariable">hello'</span>
<span class="token hvariable">world</span>

<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">foo</span> <span class="token number">1</span> <span class="token string">"abc"</span>
<span class="token hvariable">int</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token hvariable">string</span><span class="token operator">:</span> <span class="token hvariable">abc</span>
<span class="token number">4</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>The first parameter of <code>trace</code> is the string to output. The second parameter will be returned as is, without modifications.</p><p>In <code>foo</code>, we define the tracing on a separate line so that it's easy to comment out. The first match uses <em>guards</em> (see <a href="https://learnyouahaskell.github.io/syntax-in-functions#guards-guards" rel="noreferrer" target="_blank">LYAH</a>).</p><p>Here are some convenience utilities that may spare a few keystrokes:</p><h3 id="show-a-string-a-string" tabindex="-1"><a class="md-anchor" href="#show-a-string-a-string" aria-hidden="true"></a> <code>(++$) :: (Show a) =&gt; String -&gt; a -&gt; String</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token punctuation">(</span><span class="token operator">++$</span><span class="token punctuation">)</span> <span class="token hvariable">s</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token hvariable">s</span> <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">x</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>So that we don't have to write <code>show</code> for every non-string item we want to print. We can use this in <code>foo</code>'s trace message to replace <code>++ show n</code> with <code>++$ n</code>.</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">foo</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">foo</span> <span class="token hvariable">n</span> <span class="token hvariable">s</span> <span class="token operator">|</span> <span class="token hvariable">trace</span> <span class="token punctuation">(</span><span class="token string">"int:"</span> <span class="token operator">++$</span> <span class="token hvariable">n</span> <span class="token operator">++</span> <span class="token string">";  string: "</span> <span class="token operator">++</span> <span class="token hvariable">s</span><span class="token punctuation">)</span> <span class="token constant">False</span> <span class="token operator">=</span> <span class="token builtin">undefined</span>
<span class="token hvariable">foo</span> <span class="token hvariable">n</span> <span class="token hvariable">s</span> <span class="token operator">=</span> <span class="token hvariable">n</span> <span class="token operator">+</span> <span class="token builtin">length</span> <span class="token hvariable">s</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>It's a bit superfluous, but I think writing <code>show</code> all the time bloats the debug message.</p><h3 id="trace-show-a-a-a" tabindex="-1"><a class="md-anchor" href="#trace-show-a-a-a" aria-hidden="true"></a> <code>trace' :: (Show a) =&gt; a -&gt; a</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">trace'</span> <span class="token hvariable">x</span> <span class="token operator">=</span> <span class="token hvariable">trace</span> <span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">x</span><span class="token punctuation">)</span> <span class="token hvariable">x</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>A helper to print and return its argument, to avoid repetition.</p><h2 id="advanced-utilities" tabindex="-1"><a class="md-anchor" href="#advanced-utilities" aria-hidden="true"></a> Advanced Utilities</h2><p>In the following sections, I'll talk about fundamentals less so that I can focus more on the higher-level things. I'll presume the reader has a solid grasp of fundamentals.</p><h3 id="counter-hashable-a-eq-a-a-m-hashmap-a-int" tabindex="-1"><a class="md-anchor" href="#counter-hashable-a-eq-a-a-m-hashmap-a-int" aria-hidden="true"></a> <code>counter :: (Hashable a, Eq a) =&gt; [a] -&gt; M.HashMap a Int</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">counter</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">M<span class="token punctuation">.</span>insertWith</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token hvariable">x</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">M<span class="token punctuation">.</span>empty</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>This helper function takes a list and counts the number of occurrences, packing it into a hashmap for efficient lookup.</p><p><a class="lightbox-single" title="" href="/img/posts/programming/aoc-2021/assets/hashmapuh-1908w.webp"><img class="mb-2 rw center jw-65" src="/img/posts/programming/aoc-2021/assets/hashmapuh-1908w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 1908 / 766" alt="" title="" srcset="/img/posts/programming/aoc-2021/assets/hashmapuh-256w.webp 256w, /img/posts/programming/aoc-2021/assets/hashmapuh-512w.webp 512w, /img/posts/programming/aoc-2021/assets/hashmapuh-1024w.webp 1024w, /img/posts/programming/aoc-2021/assets/hashmapuh-1908w.webp 1908w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, (max-width: 1024px) 1024px, 1908px"></a></p><p>After all, if Python has such a convenience (<code>collections.Counter</code>), why shouldn't Haskell have something similar?</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">counter</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token operator">=</span> <span class="token hvariable">M<span class="token punctuation">.</span>fromList</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>In fact, we can generalise this to not only work with lists as input, but for any <code>Foldable</code> type. This is what we would get if we let the Haskell's type inference work its magic:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token hvariable">counter</span> <span class="token operator">=</span> <span class="token builtin">foldr</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">x</span> <span class="token operator">-&gt;</span> <span class="token hvariable">M<span class="token punctuation">.</span>insertWith</span> <span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token hvariable">x</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">M<span class="token punctuation">.</span>empty</span>
<span class="token hvariable">ghci</span><span class="token operator">&gt;</span> <span class="token operator">:</span><span class="token hvariable">t</span> <span class="token hvariable">counter</span>
<span class="token hvariable">counter</span>
  <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Foldable</span> <span class="token hvariable">t</span><span class="token punctuation">,</span> <span class="token constant">Eq</span> <span class="token hvariable">k</span><span class="token punctuation">,</span>
      <span class="token hvariable">hashable</span><span class="token operator">-</span><span class="token number">1.3</span><span class="token punctuation">.</span><span class="token number">1.0</span><span class="token operator">:</span><span class="token constant">Data<span class="token punctuation">.</span>Hashable<span class="token punctuation">.</span>Class<span class="token punctuation">.</span>Hashable</span> <span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token constant">Num</span> <span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
     <span class="token hvariable">t</span> <span class="token hvariable">k</span> <span class="token operator">-&gt;</span> <span class="token constant">M<span class="token punctuation">.</span>HashMap</span> <span class="token hvariable">k</span> <span class="token hvariable">v</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>That is:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">counter</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Foldable</span> <span class="token hvariable">t</span><span class="token punctuation">,</span> <span class="token constant">Eq</span> <span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token constant">Hashable</span> <span class="token hvariable">k</span><span class="token punctuation">,</span> <span class="token constant">Num</span> <span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
            <span class="token hvariable">t</span> <span class="token hvariable">k</span> <span class="token operator">-&gt;</span> <span class="token constant">M<span class="token punctuation">.</span>HashMap</span> <span class="token hvariable">k</span> <span class="token hvariable">v</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>I used the <a href="https://hackage.haskell.org/package/unordered-containers-0.2.19.1/docs/Data-HashMap-Strict.html" rel="noreferrer" target="_blank">strict hashmap</a> provided in the <code>unordered-collections</code> package, but it should work with lazy hashmaps as well.</p><div class="alert alert-warning d-flex align-items-start"><i class="fas fa-triangle-exclamation ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>If you want to use the <code>Hashable</code> typeclass in code, you'll need to jump through some hoops by <a href="https://stackoverflow.com/a/68761231/10239789" rel="noreferrer" target="_blank">"exposing" the hidden <code>hashable</code> package and importing <code>Data.Hashable</code></a>.</p></div></div><h2 id="parser-utilities" tabindex="-1"><a class="md-anchor" href="#parser-utilities" aria-hidden="true"></a> Parser Utilities</h2><p>I used MegaParsec this year, but the idea of the following utilities can also be applied for other parser combinator libraries.</p><h3 id="digits-num-i-read-i-parser-i" tabindex="-1"><a class="md-anchor" href="#digits-num-i-read-i-parser-i" aria-hidden="true"></a> <code>digits :: (Num i, Read i) =&gt; Parser i</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">digits</span> <span class="token operator">=</span> <span class="token builtin">read</span> <span class="token operator">&lt;$&gt;</span> <span class="token hvariable">some</span> <span class="token hvariable">digitChar</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Convenience function for parsing a number (string of digits).</p><h3 id="integer-num-i-read-i-show-i-parser-i" tabindex="-1"><a class="md-anchor" href="#integer-num-i-read-i-show-i-parser-i" aria-hidden="true"></a> <code>integer :: (Num i, Read i, Show i) =&gt; Parser i</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">integer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">negate</span> <span class="token operator">&lt;$&gt;</span> <span class="token hvariable">try</span> <span class="token punctuation">(</span><span class="token hvariable">char</span> <span class="token char string">'-'</span> <span class="token operator">*&gt;</span> <span class="token hvariable">digits</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;|&gt;</span> <span class="token hvariable">digits</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Convenience function for parsing a (possibly negative) integer.</p><h2 id="aoc-specific-utilities" tabindex="-1"><a class="md-anchor" href="#aoc-specific-utilities" aria-hidden="true"></a> AOC-specific Utilities</h2><p>Some more utilities which I wrote solely for AOC.</p><h3 id="defaultmain" tabindex="-1"><a class="md-anchor" href="#defaultmain" aria-hidden="true"></a> <code>defaultMain</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">defaultMain</span>
  <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">ParseLike</span> <span class="token hvariable">p</span><span class="token punctuation">,</span> <span class="token constant">Print</span> <span class="token hvariable">b</span><span class="token punctuation">,</span> <span class="token constant">Print</span> <span class="token hvariable">c</span><span class="token punctuation">)</span>
  <span class="token operator">=&gt;</span> <span class="token constant">String</span>   <span class="token comment">-- Default input file, if no -f option was provided from args.</span>
  <span class="token operator">-&gt;</span> <span class="token hvariable">p</span> <span class="token hvariable">a</span>      <span class="token comment">-- Any instance of ParseLike, e.g. a function (String -&gt; a) or a parser combinator (Parser a).</span>
  <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token comment">-- Function to solve part 1. Takes in input and returns something printable.</span>
  <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token comment">-- Function to solve part 2.  -- Ditto. --</span>
  <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">defaultMain</span> <span class="token hvariable">defaultFile</span> <span class="token hvariable">parse</span> <span class="token hvariable">part1</span> <span class="token hvariable">part2</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token punctuation">(</span><span class="token hvariable">opts</span><span class="token punctuation">,</span> <span class="token hvariable">_</span><span class="token punctuation">)</span>  <span class="token operator">&lt;-</span> <span class="token hvariable">parseArgs</span> <span class="token punctuation">(</span><span class="token hvariable">nullOpts</span> <span class="token punctuation">{</span> <span class="token hvariable">file</span> <span class="token operator">=</span> <span class="token hvariable">defaultFile</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&lt;$&gt;</span> <span class="token hvariable">getArgs</span>
  <span class="token hvariable">input</span> <span class="token operator">&lt;-</span> <span class="token hvariable">doParse</span> <span class="token hvariable">parse</span> <span class="token punctuation">(</span><span class="token hvariable">file</span> <span class="token hvariable">opts</span><span class="token punctuation">)</span> <span class="token operator">&lt;$&gt;</span> <span class="token builtin">readFile</span> <span class="token punctuation">(</span><span class="token hvariable">file</span> <span class="token hvariable">opts</span><span class="token punctuation">)</span>
  <span class="token hvariable">when</span> <span class="token punctuation">(</span><span class="token hvariable">runPart1</span> <span class="token hvariable">opts</span><span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token builtin">putStr</span> <span class="token string">"part1: "</span>
    <span class="token builtin">print</span>' <span class="token operator">$</span> <span class="token hvariable">part1</span> <span class="token hvariable">input</span>
  <span class="token hvariable">when</span> <span class="token punctuation">(</span><span class="token hvariable">runPart2</span> <span class="token hvariable">opts</span><span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token builtin">putStr</span> <span class="token string">"part2: "</span>
    <span class="token builtin">print</span>' <span class="token operator">$</span> <span class="token hvariable">part2</span> <span class="token hvariable">input</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>This utility may seem scary since there it's packed with other user-defined utilities. But to summarise, this function helps standardise the AOC part 1/part 2 structure while also providing the option to specify input files from the command line. This is useful as Haskell Stack is a bit fussy and long-winded when it comes to compilation.</p><p>One thing I found useful was having flexible parse methods. Sometimes I want to parse using a <code>String -&gt; a</code> function because it was enough to simply do <code>map read . lines</code>. Other times I want to parse using a <code>Parser a</code> combinator due to more complicated syntax in the input. Thanks to ad-hoc polymorphism, we can achieve this using typeclasses; and so the <code>ParseLike</code> typeclass was born:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token keyword">class</span> <span class="token constant">ParseLike</span> <span class="token hvariable">p</span> <span class="token keyword">where</span>
  <span class="token comment">-- Parser object, filename, contents -&gt; result.</span>
  <span class="token hvariable">doParse</span> <span class="token operator">::</span> <span class="token hvariable">p</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span>

<span class="token keyword">instance</span> <span class="token constant">ParseLike</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-&gt;</span><span class="token punctuation">)</span> <span class="token constant">String</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
  <span class="token hvariable">doParse</span> <span class="token hvariable">f</span> <span class="token hvariable">_</span> <span class="token operator">=</span> <span class="token hvariable">f</span>  <span class="token comment">-- Apply a parse function `f` on `contents`.</span>

<span class="token keyword">instance</span> <span class="token constant">ParseLike</span> <span class="token constant">Parser</span> <span class="token keyword">where</span>
  <span class="token hvariable">doParse</span> <span class="token hvariable">p</span> <span class="token hvariable">file</span> <span class="token hvariable">txt</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token hvariable">runParser</span> <span class="token hvariable">p</span> <span class="token hvariable">file</span> <span class="token hvariable">txt</span> <span class="token keyword">of</span>
    <span class="token constant">Right</span> <span class="token hvariable">res</span> <span class="token operator">-&gt;</span> <span class="token hvariable">res</span>
    <span class="token constant">Left</span>  <span class="token hvariable">err</span> <span class="token operator">-&gt;</span> <span class="token hvariable">T<span class="token punctuation">.</span>trace</span> <span class="token punctuation">(</span><span class="token hvariable">errorBundlePretty</span> <span class="token hvariable">err</span><span class="token punctuation">)</span> <span class="token builtin">undefined</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p><a class="lightbox-single" title="" href="/img/posts/programming/aoc-2021/assets/parselike-500w.webp"><img class="mb-2 rw center jw-45" src="/img/posts/programming/aoc-2021/assets/parselike-500w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 500 / 756" alt="Red button superhero pressing both buttons. We can have the best of both worlds: string-to-generic functions and parser combinators!" title="" srcset="/img/posts/programming/aoc-2021/assets/parselike-256w.webp 256w, /img/posts/programming/aoc-2021/assets/parselike-500w.webp 500w" sizes="(max-width: 256px) 256px, 500px"></a></p><p>Here's an example usage from <a href="https://github.com/TrebledJ/aoc/blob/master/2021/haskell/src/Days/D01.hs" rel="noreferrer" target="_blank">Day 1</a>:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">defaultMain</span> <span class="token hvariable">defaultFile</span> <span class="token hvariable">parse</span> <span class="token hvariable">part1</span> <span class="token hvariable">part2</span>

<span class="token hvariable">defaultFile</span> <span class="token operator">::</span> <span class="token constant">String</span>
<span class="token hvariable">defaultFile</span> <span class="token operator">=</span> <span class="token string">"../input/d01.txt"</span>

<span class="token hvariable">parse</span> <span class="token operator">::</span> <span class="token constant">String</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token constant">Int</span><span class="token punctuation">]</span>
<span class="token hvariable">parse</span> <span class="token operator">=</span> <span class="token builtin">map</span> <span class="token builtin">read</span> <span class="token operator">.</span> <span class="token builtin">lines</span>

<span class="token hvariable">part1</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Int</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">part1</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token builtin">length</span> <span class="token operator">$</span> <span class="token builtin">filter</span> <span class="token punctuation">(</span><span class="token builtin">uncurry</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token builtin">zip</span> <span class="token hvariable">xs</span> <span class="token punctuation">(</span><span class="token builtin">tail</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>

<span class="token hvariable">part2</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Int</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">part2</span> <span class="token hvariable">xs</span> <span class="token operator">=</span>
  <span class="token hvariable">part1</span> <span class="token operator">$</span> <span class="token builtin">map</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token hvariable">b</span><span class="token punctuation">,</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token hvariable">a</span> <span class="token operator">+</span> <span class="token hvariable">b</span> <span class="token operator">+</span> <span class="token hvariable">c</span><span class="token punctuation">)</span> <span class="token operator">$</span> <span class="token builtin">zip3</span> <span class="token hvariable">xs</span> <span class="token punctuation">(</span><span class="token builtin">tail</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">tail</span> <span class="token operator">$</span> <span class="token builtin">tail</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Other usage examples can be found in <a href="https://github.com/TrebledJ/aoc/tree/master/2021/haskell/app" rel="noreferrer" target="_blank">my Haskell AOC solutions</a>.</p><h3 id="criterionmain" tabindex="-1"><a class="md-anchor" href="#criterionmain" aria-hidden="true"></a> <code>criterionMain</code></h3><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">criterionMain</span>
  <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">ParseLike</span> <span class="token hvariable">p</span><span class="token punctuation">)</span>
  <span class="token operator">=&gt;</span> <span class="token constant">String</span>   <span class="token comment">-- Default input file, if no -f option was provided from args.</span>
  <span class="token operator">-&gt;</span> <span class="token hvariable">p</span> <span class="token hvariable">a</span>      <span class="token comment">-- Any instance of ParseLike, e.g. a function (String -&gt; a) or a parser combinator (Parser a).</span>
  <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token constant">C<span class="token punctuation">.</span>Benchmark</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">-- Criterion IO () benchmarking function.</span>
  <span class="token operator">-&gt;</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">criterionMain</span> <span class="token hvariable">defaultFile</span> <span class="token hvariable">parse</span> <span class="token hvariable">getBench</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token punctuation">(</span><span class="token hvariable">opts</span><span class="token punctuation">,</span> <span class="token hvariable">rest</span><span class="token punctuation">)</span>  <span class="token operator">&lt;-</span> <span class="token hvariable">parseArgs</span> <span class="token punctuation">(</span><span class="token hvariable">nullOpts</span> <span class="token punctuation">{</span> <span class="token hvariable">file</span> <span class="token operator">=</span> <span class="token hvariable">defaultFile</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&lt;$&gt;</span> <span class="token hvariable">getArgs</span>
  <span class="token hvariable">input</span> <span class="token operator">&lt;-</span> <span class="token hvariable">doParse</span> <span class="token hvariable">parse</span> <span class="token punctuation">(</span><span class="token hvariable">file</span> <span class="token hvariable">opts</span><span class="token punctuation">)</span> <span class="token operator">&lt;$&gt;</span> <span class="token builtin">readFile</span> <span class="token punctuation">(</span><span class="token hvariable">file</span> <span class="token hvariable">opts</span><span class="token punctuation">)</span>
  <span class="token hvariable">withArgs</span> <span class="token hvariable">rest</span> <span class="token operator">$</span> <span class="token hvariable">C<span class="token punctuation">.</span>defaultMain</span> <span class="token operator">$</span> <span class="token hvariable">getBench</span> <span class="token hvariable">input</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Criterion is an excellent benchmarking library with various config options and output formats. To integrate Criterion with my pre-existing options, I hand-spun another default-main for benchmarking. So instead of passing my parsed input to part 1/2 functions, I pass it to benchmarks.</p><p>Example usage from <a href="https://github.com/TrebledJ/aoc/blob/master/2021/haskell/src/Days/D22.hs" rel="noreferrer" target="_blank">Day 22</a>:</p><div class="code-toolbar"><pre data-lang-off="" class="language-haskell" tabindex="0"><code class="language-haskell"><span class="token hvariable">main</span> <span class="token operator">::</span> <span class="token constant">IO</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">criterionMain</span> <span class="token hvariable">defaultFile</span> <span class="token hvariable">parser</span> <span class="token operator">$</span> <span class="token operator">\</span><span class="token hvariable">input</span> <span class="token operator">-&gt;</span>
  <span class="token punctuation">[</span> <span class="token hvariable">C<span class="token punctuation">.</span>bgroup</span> <span class="token string">"part1"</span> <span class="token punctuation">[</span><span class="token hvariable">C<span class="token punctuation">.</span>bench</span> <span class="token string">"part1"</span> <span class="token operator">$</span> <span class="token hvariable">C<span class="token punctuation">.</span>whnf</span> <span class="token hvariable">part1</span> <span class="token hvariable">input</span><span class="token punctuation">]</span>
  <span class="token punctuation">,</span> <span class="token hvariable">C<span class="token punctuation">.</span>bgroup</span>
    <span class="token string">"part2"</span>
    <span class="token punctuation">[</span> <span class="token hvariable">C<span class="token punctuation">.</span>bench</span> <span class="token string">"sum of unions"</span> <span class="token operator">$</span> <span class="token hvariable">C<span class="token punctuation">.</span>whnf</span> <span class="token hvariable">part2</span> <span class="token hvariable">input</span>
    <span class="token punctuation">,</span> <span class="token hvariable">C<span class="token punctuation">.</span>bench</span> <span class="token string">"sum of unions (optimised)"</span> <span class="token operator">$</span> <span class="token hvariable">C<span class="token punctuation">.</span>whnf</span> <span class="token hvariable">part2_optimised</span> <span class="token hvariable">input</span>
    <span class="token punctuation">,</span> <span class="token hvariable">C<span class="token punctuation">.</span>bench</span> <span class="token string">"sum of intersections"</span> <span class="token operator">$</span> <span class="token hvariable">C<span class="token punctuation">.</span>whnf</span> <span class="token hvariable">part2_intersect</span> <span class="token hvariable">input</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>

<span class="token hvariable">parser</span> <span class="token operator">::</span> <span class="token constant">Parser</span> <span class="token punctuation">[</span><span class="token constant">Command</span><span class="token punctuation">]</span>
<span class="token hvariable">parser</span> <span class="token operator">=</span> <span class="token operator">...</span>

<span class="token hvariable">part1</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Command</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">part1</span> <span class="token hvariable">cmds</span> <span class="token operator">=</span> <span class="token operator">...</span>

<span class="token hvariable">part2</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Command</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">part2</span> <span class="token hvariable">cmds</span> <span class="token operator">=</span> <span class="token operator">...</span>

<span class="token hvariable">part2_optimised</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Command</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">part2_optimised</span> <span class="token hvariable">cmds</span> <span class="token operator">=</span> <span class="token operator">...</span>

<span class="token hvariable">part2_intersect</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Command</span><span class="token punctuation">]</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span>
<span class="token hvariable">part2_intersect</span> <span class="token hvariable">cmds</span> <span class="token operator">=</span> <span class="token operator">...</span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div></div><a id="end-of-article"></a><br><script defer src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><div class="post-share dim-gentle mb-3 d-flex flex-row align-items-center"><div class="d-flex flex-row flex-wrap align-items-center gap-3"><span>Share&nbsp;on</span> <a class="no-decoration" data-sharer="reddit" data-title="AOC 2021 Haskell Utils" data-url="/posts/aoc-2021-haskell-utils/"><span class="fs-4"><i class="fab fa-reddit"></i> </span></a><a class="no-decoration" data-sharer="telegram" data-title="AOC 2021 Haskell Utils" data-url="/posts/aoc-2021-haskell-utils/"><span class="fs-4"><i class="fab fa-telegram"></i> </span></a><a class="no-decoration" data-sharer="whatsapp" data-title="AOC 2021 Haskell Utils" data-url="/posts/aoc-2021-haskell-utils/"><span class="fs-4"><i class="fab fa-whatsapp"></i> </span></a><a class="no-decoration" data-sharer="linkedin" data-title="AOC 2021 Haskell Utils" data-url="/posts/aoc-2021-haskell-utils/"><span class="fs-4"><i class="fab fa-linkedin"></i> </span></a><a class="no-decoration" data-sharer="vk" data-title="AOC 2021 Haskell Utils" data-url="/posts/aoc-2021-haskell-utils/"><span class="fs-4"><i class="fab fa-vk"></i> </span></a><a class="no-decoration" data-sharer="twitter" data-title="AOC 2021 Haskell Utils" data-url="/posts/aoc-2021-haskell-utils/"><span class="fs-4"><i class="fab fa-twitter"></i> </span></a><a id="copy-link-button" class="no-decoration" data-bs-toggle="tooltip" data-bs-trigger="click" title="Link copied!"><span class="fs-4"><i class="fas fa-link"></i></span></a></div></div><hr><div id="post-author-container" class="d-flex justify-content-between align-items-center gap-3" itemprop="author" itemscope itemtype="https://schema.org/Person"><img src="/img/profile-icon.jpg" class="profile-img" alt="" loading="lazy" decoding="async" itemprop="image"><div class="author-info d-flex flex-column gap-1"><p class="profile-name" itemprop="name">TrebledJ</p><p class="profile-bio" itemprop="description">Passionate problem-solver, pentester, and autodidact. I thrive on learning new things and enjoy passing it on. When not immersed in bughunting or programming, I can be found taking walks, composing a short tune, and occasionally indulging in CTF challenges.</p></div></div><hr class="section-sep"><div id="related" class="jw-100"><h3><i class="fas fa-circle-nodes me-2"></i>Related Posts</h3><div class="row gx-3 mt-4"><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/the-mathematics-of-types/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/the-mathematics-of-types/"><img class="post-img-blurred-bg" src="/img/posts/programming/concepts/mathematics-of-types/assets/thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 512" alt="Thumbnail for The Mathematics of Types" srcset="/img/posts/programming/concepts/mathematics-of-types/assets/thumbnail-256w.webp 256w, /img/posts/programming/concepts/mathematics-of-types/assets/thumbnail-512w.webp 512w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/concepts/mathematics-of-types/assets/thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 512" alt="Thumbnail for The Mathematics of Types" srcset="/img/posts/programming/concepts/mathematics-of-types/assets/thumbnail-256w.webp 256w, /img/posts/programming/concepts/mathematics-of-types/assets/thumbnail-512w.webp 512w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">The Mathematics of Types</h2><div class="post-summary"><p>Programming isn't about mindlessly typing away on a keyboard. There is an aesthetic quality that comes with approaching a problem.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/mathematics/" itemprop="keywords">mathematics</a> </span><span><a class="jtag" href="/tags/haskell/" itemprop="keywords">haskell</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/aoc-2021-day-22/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/aoc-2021-day-22/"><img class="post-img-blurred-bg" src="/img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 285" alt="Thumbnail for AOC&nbsp;2021 Day&nbsp;22 – Reactor Reboot" srcset="/img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-256w.webp 256w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-512w.webp 512w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-800w.webp 800w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 285" alt="Thumbnail for AOC&nbsp;2021 Day&nbsp;22 – Reactor Reboot" srcset="/img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-256w.webp 256w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-512w.webp 512w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-22-thumbnail-800w.webp 800w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">AOC&nbsp;2021 Day&nbsp;22 – Reactor Reboot</h2><div class="post-summary"><p>Reboot reactors from a submarine using set theory.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/aoc/" itemprop="keywords">aoc</a> </span><span><a class="jtag" href="/tags/rust/" itemprop="keywords">rust</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/implicit-parameters-in-scala-and-haskell/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/implicit-parameters-in-scala-and-haskell/"><img class="post-img-blurred-bg" src="/img/posts/programming/concepts/implicit-parameters/assets/thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 288" alt="Thumbnail for Implicit Parameters in Scala and Haskell" srcset="/img/posts/programming/concepts/implicit-parameters/assets/thumbnail-256w.webp 256w, /img/posts/programming/concepts/implicit-parameters/assets/thumbnail-512w.webp 512w, /img/posts/programming/concepts/implicit-parameters/assets/thumbnail-1024w.webp 1024w, /img/posts/programming/concepts/implicit-parameters/assets/thumbnail-1060w.webp 1060w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/concepts/implicit-parameters/assets/thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 288" alt="Thumbnail for Implicit Parameters in Scala and Haskell" srcset="/img/posts/programming/concepts/implicit-parameters/assets/thumbnail-256w.webp 256w, /img/posts/programming/concepts/implicit-parameters/assets/thumbnail-512w.webp 512w, /img/posts/programming/concepts/implicit-parameters/assets/thumbnail-1024w.webp 1024w, /img/posts/programming/concepts/implicit-parameters/assets/thumbnail-1060w.webp 1060w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Implicit Parameters in Scala and Haskell</h2><div class="post-summary"><p>...and also C++ (kinda).</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/tutorial/" itemprop="keywords">tutorial</a> </span><span><a class="jtag" href="/tags/programming-languages/" itemprop="keywords">programming-languages</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/aoc-2021-day-24/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/aoc-2021-day-24/"><img class="post-img-blurred-bg" src="/img/posts/programming/aoc-2021/assets/z3-500w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 500 / 560" alt="Thumbnail for AOC&nbsp;2021 Day&nbsp;24 – No U" srcset="/img/posts/programming/aoc-2021/assets/z3-256w.webp 256w, /img/posts/programming/aoc-2021/assets/z3-500w.webp 500w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 500px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/aoc-2021/assets/z3-500w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 500 / 560" alt="Thumbnail for AOC&nbsp;2021 Day&nbsp;24 – No U" srcset="/img/posts/programming/aoc-2021/assets/z3-256w.webp 256w, /img/posts/programming/aoc-2021/assets/z3-500w.webp 500w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 500px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">AOC&nbsp;2021 Day&nbsp;24 – No U</h2><div class="post-summary"><p>Finally a reverse engineering challenge in Advent of Code.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/aoc/" itemprop="keywords">aoc</a> </span><span><a class="jtag" href="/tags/python/" itemprop="keywords">python</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/aoc-2021-day-16/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/aoc-2021-day-16/"><img class="post-img-blurred-bg" src="/img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 401" alt="Thumbnail for AOC&nbsp;2021 Day&nbsp;16 – Parser Combinator Fun" srcset="/img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-256w.webp 256w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-512w.webp 512w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-996w.webp 996w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 401" alt="Thumbnail for AOC&nbsp;2021 Day&nbsp;16 – Parser Combinator Fun" srcset="/img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-256w.webp 256w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-512w.webp 512w, /img/posts/programming/aoc-2021/assets/aoc-2021-day-16-thumbnail-996w.webp 996w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">AOC&nbsp;2021 Day&nbsp;16 – Parser Combinator Fun</h2><div class="post-summary"><p>Decoding packets with monads.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/aoc/" itemprop="keywords">aoc</a> </span><span><a class="jtag" href="/tags/haskell/" itemprop="keywords">haskell</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/aoc-2021/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/aoc-2021/"><img class="post-img-blurred-bg" src="/img/posts/experiences/aoc/assets/aoc-2021-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 466" alt="Thumbnail for Advent of Code 2021" srcset="/img/posts/experiences/aoc/assets/aoc-2021-256w.webp 256w, /img/posts/experiences/aoc/assets/aoc-2021-512w.webp 512w, /img/posts/experiences/aoc/assets/aoc-2021-1024w.webp 1024w, /img/posts/experiences/aoc/assets/aoc-2021-1310w.webp 1310w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/experiences/aoc/assets/aoc-2021-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 466" alt="Thumbnail for Advent of Code 2021" srcset="/img/posts/experiences/aoc/assets/aoc-2021-256w.webp 256w, /img/posts/experiences/aoc/assets/aoc-2021-512w.webp 512w, /img/posts/experiences/aoc/assets/aoc-2021-1024w.webp 1024w, /img/posts/experiences/aoc/assets/aoc-2021-1310w.webp 1310w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Advent of Code 2021</h2><div class="post-summary"><p>Synopsis and reflections on solving the Advent of Code 2021 challenges through various programming languages.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/experience/" itemprop="keywords">experience</a> </span><span><a class="jtag" href="/tags/aoc/" itemprop="keywords">aoc</a> </span><span><a class="jtag" href="/tags/haskell/" itemprop="keywords">haskell</a></span></div></div></div></div></article></div></div><hr><h3><i class="fas fa-tags me-2"></i>Related Tags</h3><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to aoc, functional, programming">software.general</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/programming/">programming</a> <a class="jtag" href="/tags/software-engineering/">software-engineering</a> <a class="jtag" href="/tags/web/">web</a> <a class="jtag" href="/tags/aoc/">aoc</a> <a class="jtag" href="/tags/apps/">apps</a> <a class="jtag" href="/tags/dsp/">dsp</a> <a class="jtag" href="/tags/programming-languages/">programming-languages</a> <a class="jtag" href="/tags/linux/">linux</a> <a class="jtag" href="/tags/performance/">performance</a> <a class="jtag" href="/tags/functional/">functional</a> <a class="jtag" href="/tags/types/">types</a> <a class="jtag" href="/tags/windows/">windows</a> <a class="jtag" href="/tags/ai/">ai</a> <a class="jtag" href="/tags/metaprogramming/">metaprogramming</a> <a class="jtag" href="/tags/oop/">oop</a></span></div><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to haskell">software.programming-language</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/cpp/">cpp</a> <a class="jtag" href="/tags/python/">python</a> <a class="jtag" href="/tags/c/">c</a> <a class="jtag" href="/tags/haskell/">haskell</a> <a class="jtag" href="/tags/js/">js</a> <a class="jtag" href="/tags/qt/">qt</a> <a class="jtag" href="/tags/rust/">rust</a> <a class="jtag" href="/tags/qml/">qml</a> <a class="jtag" href="/tags/sql/">sql</a> <a class="jtag" href="/tags/scala/">scala</a></span></div></div><hr class="section-sep"><div class="container-md mt-4 p-4"><a id="comments"></a><p><em>Comments are back! Privacy-focused, without ads, bloatware 🤮, and trackers. Be one of the first to contribute to the discussion — I'd love to hear your thoughts.</em></p><script defer src="https://trebledj.me/js/comentario.min.js"></script><comentario-comments id="comentario" auto-init="false" no-fonts="true" css-override="false" theme="dark"></comentario-comments></div><br></div></div></article></div></div></div><footer class="d-flex flex-column gap-2"><div class="d-flex flex-row gap-3 mx-auto" style="width:fit-content;"><a rel="me noreferrer" href="https://github.com/TrebledJ" target="_blank"><i class="social-icon fab fa-github" style="color:rgb(150, 60, 180) !important;"></i> </a><a rel="me noreferrer" href="https://stackoverflow.com/users/10239789/trebledj" target="_blank"><i class="social-icon fab fa-stack-overflow" style="color:rgb(236, 124, 34) !important;"></i> </a><a rel="me noreferrer" href="https://www.codingame.com/profile/8444100ecb9723c1ec542346b0630aaa2821532" target="_blank"><i class="social-icon d-flex flex-column"><img src="/img/logos/codingame.webp" alt="" loading="lazy" decoding="async"></i></a><a rel="me noreferrer" href="https://soundcloud.com/trebledj" target="_blank"><i class="social-icon fab fa-soundcloud" style="color:rgb(237, 110, 30) !important;"></i> </a><a rel="me noreferrer" href="https://musescore.com/user/20636901" target="_blank"><i class="social-icon d-flex flex-column"><img src="/img/logos/musescore.webp" alt="" loading="lazy" decoding="async"></i></a><a rel="me noreferrer" href="https://discordapp.com/users/220427982798454794" target="_blank"><i class="social-icon fab fa-discord" style="color:rgb(84, 100, 235) !important;"></i> </a><a rel="me" href="mailto:trebledjjj@gmail.com"><i class="social-icon fas fa-envelope"></i> </a><a rel="me" href="/feeds"><i class="social-icon fas fa-square-rss"></i></a></div><p>Copyright&nbsp;©&nbsp;2025&nbsp;TrebledJ • <a href="/privacy-policy">Privacy&nbsp;Policy</a> • <a href="https://github.com/TrebledJ/trebledj.github.io?tab=readme-ov-file#credits--appreciation" rel="noreferrer" target="_blank">Credits</a></p></footer><script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js"></script><script>var tocOptions={}</script><script defer src="/cb/MPnrKnjI5w.js"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" rel="stylesheet" media="print"><script>document.querySelectorAll('link[media|="print"]').forEach(e=>{e.addEventListener("load",()=>e.media="all"),e.sheet&&(e.media="all")})</script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!0})})</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;52d99b3d385b4c9a98ac8ad109a95a2a&quot;}"></script></body></html>