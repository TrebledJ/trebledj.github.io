<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Optimising Web Icons for Fun - TrebledJ's Pages</title><meta name="description" content="Ejecting unused cargo for leaner performance."><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="trebledj,optimising web icons for fun,ejecting unused cargo for leaner performance.,programming,web,performance,meta,notes,writeup,project,software-engineering"><meta name="robots" content="index,follow"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'sha256-Wv9Tjjg7Y7X5sBbP5AXqAQJA6+eewSRUjoPhNczfpnM=' 'sha256-FBtdNYnNdsvTKcrNIznI+jwGwhW3pNA5x/yQUw8jOPA=' 'sha256-5e8R4YC3Atf/5McNMkFk4TZYUtMEItdy9ikt1KUoPSc=' 'sha256-qlkNkQyGC5u9Brt4wwVi0MsPO/hVdrz3rzXuWYIkAbM=' 'sha256-J+ryCgKrW+QOH4xdCyPd6R5W3u9wJkXayR7KvtlnCnQ=' 'sha256-Deekn20h+++EarpL0nFQLX7JSJv7s/2W9f988ZFAh14=' comments.trebledj.me code.jquery.com cdn.jsdelivr.net gist.github.com static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' comments.trebledj.me cdn.jsdelivr.net cdnjs.cloudflare.com github.githubassets.com; font-src 'self' data: comments.trebledj.me cdn.jsdelivr.net cdnjs.cloudflare.com; img-src 'self' data: comments.trebledj.me; frame-src 'self' *.soundcloud.com; connect-src 'self' comments.trebledj.me wss://comments.trebledj.me cloudflareinsights.com formcarry.com;"><link href="/feeds/posts.xml" rel="alternate" title="RSS Feed for TrebledJ's Pages" type="application/rss+xml"><meta property="og:site_name" content="TrebledJ's Pages"><meta property="og:type" content="article"><meta property="og:title" content="Optimising Web Icons for Fun - TrebledJ's Pages"><meta property="twitter:title" content="Optimising Web Icons for Fun - TrebledJ's Pages"><meta property="og:description" content="Ejecting unused cargo for leaner performance.

I decided to spend this Labour Day doing a bit of frontend performance engineering, learning Typescript along the way. I've been eyeing my Font Awesome (FA) assets for a while..."><meta property="twitter:description" content="Ejecting unused cargo for leaner performance.

I decided to spend this Labour Day doing a bit of frontend performance engineering, learning Typescript along the way. I've been eyeing my Font Awesome (FA) assets for a while..."><meta property="og:url" content="https://trebledj.me/posts/optimising-web-icons-for-fun/"><meta name="twitter:card" content="summary_large_image"><meta property="og:image" content="https://trebledj.me/img/posts/programming/mini-projects/optimising-web-icons/assets/optimising-web-icons-thumbnail-1790w.webp"><meta property="twitter:image" content="https://trebledj.me/img/posts/programming/mini-projects/optimising-web-icons/assets/optimising-web-icons-thumbnail-1790w.webp"><meta property="article:published_time" content="2024-05-23T00:00:00.000Z"><meta property="article:author" content="TrebledJ"><meta property="article:section" content="programming"><meta property="article:tag" content="programming"><meta property="article:tag" content="web"><meta property="article:tag" content="performance"><meta property="article:tag" content="meta"><meta property="article:tag" content="notes"><meta property="article:tag" content="writeup"><meta property="article:tag" content="project"><meta property="article:tag" content="software-engineering"><script type="application/ld+json">{"@context": "https://schema.org","@type": "WebSite","name": "TrebledJ's Pages","url": "https://trebledj.me"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/cb/css/icons-6e60ae6c5e022aba.css"><link rel="stylesheet" href="/cb/x2ljFSZBUH.css" media="print"><style>.icon-table td{text-align:center;vertical-align:middle}</style><script>document.querySelectorAll('link[media|="print"]').forEach(e=>{e.addEventListener("load",()=>e.media="all"),e.sheet&&(e.media="all")})</script><script>const defaultTheme="dark";let icon=void 0;var reloadDisqus=void 0;function modeInit(){var e=localStorage.getItem("theme");setMode("dark"===e?"dark":"light"===e?"light":defaultTheme)}function modeInitIcon(){icon=document.getElementById("mode-switch-icon"),isLightTheme()&&(icon.classList.remove("fa-moon"),icon.classList.add("fa-sun"),icon.classList.add("mode-switch-transform"))}function isLightTheme(){return"light"===localStorage.getItem("theme")}function modeSwitcher(){var e=localStorage.getItem("theme");"dark"===e?(setMode("light"),reloadDisqus&&reloadDisqus()):"light"===e?(setMode("dark"),reloadDisqus&&reloadDisqus()):setMode(defaultTheme)}function setMode(e){"dark"===e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):"light"===e&&(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")),icon&&(icon.classList.toggle("fa-moon"),icon.classList.toggle("fa-sun"),icon.classList.toggle("mode-switch-transform"))}modeInit(),document.addEventListener("DOMContentLoaded",()=>{document.getElementById("mode-switch").addEventListener("click",()=>{modeSwitcher()})})</script><script defer src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><link rel="stylesheet" href="/css/comments.css"><link rel="icon" href="/favicon.ico" type="image/x-icon"></head><body><header><nav class="navbar navbar-expand-md py-2"><div class="container-fluid justify-content-between align-items-center"><button aria-controls="navbar-container" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler shadow-none" data-bs-target="#navbar-container" data-bs-toggle="collapse" type="button"><span id="navbar-toggler-icon"><i class="fas fa-bars"></i></span></button> <a class="navbar-brand no-decoration" href="/">TrebledJ's Pages</a><div class="navbar-collapse collapse" id="navbar-container"><ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/posts">Posts</a></li><li class="nav-item"><a class="nav-link" href="/music">Music</a></li></ul><ul class="navbar-nav"><li><a class="nav-link me-2" data-bs-toggle="modal" data-bs-target="#search-modal" aria-label="Search..." role="button"><i class="fas fa-search nav-icon"></i></a></li><li><a class="nav-link" id="mode-switch" aria-label="Theme Switch" role="button"><i id="mode-switch-icon" class="fas fa-moon nav-icon"></i></a><script>modeInitIcon()</script></li></ul></div></div></nav><div id="scroll-progress-bar"></div></header><div id="top-of-the-morning-to-you"></div><div id="search-modal" class="modal fade wide-modal" aria-hidden="true" aria-label="Search" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header pb-2 d-flex flex-row justify-content-between"><div class="container-fluid ps-0" id="search-box-container"><input type="text" autofocus class="container-fluid" id="search-box" placeholder="Search"> <i class="fas fa-search"></i></div><button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button></div><div class="modal-body" id="search-results-list"></div></div></div></div><button id="btn-back-to-top" class="btn btn-lg" type="button" aria-label="Back to Top"><i class="fas fa-arrow-up"></i></button><div id="btn-mobile-toc" class="dropup"><button type="button" class="btn btn-lg" data-bs-toggle="dropdown" aria-label="Content"><i class="fas fa-list-ul"></i></button><ul class="dropdown-menu toc-container"><li><nav class="toc"><ol><li><a href="#icon-webfonts-under-the-hood">Icon Webfonts Under the Hood</a><ol><li><a href="#fonts-and-unicode">Fonts and Unicode</a></li><li><a href="#fonts-and-css">Fonts and CSS</a></li><li><a href="#multiple-variants">Multiple Variants</a></li></ol></li><li><a href="#an-icon-dieting-plan">An Icon Dieting Plan</a></li><li><a href="#where-speed">Where speed?</a></li><li><a href="#cache-busting-with-cloudflare-cache-rules">Cache Busting with Cloudflare Cache Rules</a></li><li><a href="#closing-remarks">Closing Remarks</a></li></ol></nav></li></ul></div><div class="main-container"><div class="page-container col-lg-12"><div class="container-lg px-0"><article class="jw-100 post-article" itemscope itemtype="http://schema.org/BlogPosting"><div class="row flex-row-reverse gx-lg-5"><div class="col-lg-4 d-none d-lg-block"><div class="dim-deep"><div class="metadata-container d-flex"><div class="d-flex flex-row align-items-center"><span><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-posted-date">Posted on <span itemprop="datePublished" content="2024-05-23T08:00:00.000+08:00">2024‑05‑23</span></span></div><div class="d-flex flex-row align-items-center"><span class="post-updated-date-icon"><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-updated-date">Updated on <span itemprop="dateModified" content="2024-06-15T21:23:05.000+08:00">2024‑06‑15</span></span></div><div class="d-flex flex-row align-items-center"><span><i class="far fa-clock post-meta-icon me-1"></i> </span><span class="fs-7">6 minute read</span></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><span><i class="fas fa-tag post-meta-icon me-1 mt-2"></i></span><div class="tag-list d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/web/" itemprop="keywords">web</a> </span><span><a class="jtag" href="/tags/performance/" itemprop="keywords">performance</a> </span><span><a class="jtag" href="/tags/meta/" itemprop="keywords">meta</a> </span><span><a class="jtag" href="/tags/notes/" itemprop="keywords">notes</a> </span><span><a class="jtag" href="/tags/writeup/" itemprop="keywords">writeup</a> </span><span><a class="jtag" href="/tags/project/" itemprop="keywords">project</a> </span><span><a class="jtag" href="/tags/software-engineering/" itemprop="keywords">software-engineering</a></span></div></div></div><br><div id="toc-sidebar" class="sticky-right dim-deep dim-if-dark"><div class="toc-container"><span><a id="toc-content" href="javascript:void(0);">Content</a></span><nav class="toc"><ol><li><a href="#icon-webfonts-under-the-hood">Icon Webfonts Under the Hood</a><ol><li><a href="#fonts-and-unicode">Fonts and Unicode</a></li><li><a href="#fonts-and-css">Fonts and CSS</a></li><li><a href="#multiple-variants">Multiple Variants</a></li></ol></li><li><a href="#an-icon-dieting-plan">An Icon Dieting Plan</a></li><li><a href="#where-speed">Where speed?</a></li><li><a href="#cache-busting-with-cloudflare-cache-rules">Cache Busting with Cloudflare Cache Rules</a></li><li><a href="#closing-remarks">Closing Remarks</a></li></ol></nav><hr></div><div class="toc-link-container"><span><a href="#related">Related Posts</a></span></div><div class="toc-link-container"><span><a href="#comments">Comments</a></span></div></div></div><div class="col-lg-8 post-body-container"><div class="article-header"><h1 class="post-title" itemprop="name headline">Optimising Web Icons for Fun</h1><p class="post-desc" itemprop="alternativeHeadline">Ejecting unused cargo for leaner performance.</p><div class="d-lg-none dim-deep"><div class="metadata-container d-flex"><div class="d-flex flex-row align-items-center"><span><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-posted-date">Posted on <span itemprop="datePublished" content="2024-05-23T08:00:00.000+08:00">2024‑05‑23</span></span></div><div class="d-flex flex-row align-items-center"><span class="post-updated-date-icon"><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-updated-date">Updated on <span itemprop="dateModified" content="2024-06-15T21:23:05.000+08:00">2024‑06‑15</span></span></div><div class="d-flex flex-row align-items-center"><span><i class="far fa-clock post-meta-icon me-1"></i> </span><span class="fs-7">6 minute read</span></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><span><i class="fas fa-tag post-meta-icon me-1 mt-2"></i></span><div class="tag-list d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/web/" itemprop="keywords">web</a> </span><span><a class="jtag" href="/tags/performance/" itemprop="keywords">performance</a> </span><span><a class="jtag" href="/tags/meta/" itemprop="keywords">meta</a> </span><span><a class="jtag" href="/tags/notes/" itemprop="keywords">notes</a> </span><span><a class="jtag" href="/tags/writeup/" itemprop="keywords">writeup</a> </span><span><a class="jtag" href="/tags/project/" itemprop="keywords">project</a> </span><span><a class="jtag" href="/tags/software-engineering/" itemprop="keywords">software-engineering</a></span></div></div></div></div><hr><div class="post-body text-content" itemprop="articleBody text"><p>I decided to spend this Labour Day doing a bit of frontend performance engineering, learning Typescript along the way. I've been eyeing my Font Awesome (FA) assets for a while, and lately they've been a curious itch.</p><p>Here’s the dealio: icon webfonts are known to bundle <em>all</em> icons. This includes icons we don't use. For Font Awesome, this means the browser downloads 19kB CSS + 287kB WOFF2 gzipped data. But my site just uses 40 out of 2000… why download so much?<sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></p><p><a class="lightbox-single" title="I present you the heaviest objects in the universe: Font Files." href="/img/posts/programming/mini-projects/optimising-web-icons/assets/fonts-are-pretty-heavy-612w.webp"><img class="mb-2 rw center jw-50" src="/img/posts/programming/mini-projects/optimising-web-icons/assets/fonts-are-pretty-heavy-612w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 612 / 408" alt="I present you the heaviest objects in the universe: Font Files." title="I present you the heaviest objects in the universe: Font Files." srcset="/img/posts/programming/mini-projects/optimising-web-icons/assets/fonts-are-pretty-heavy-256w.webp 256w, /img/posts/programming/mini-projects/optimising-web-icons/assets/fonts-are-pretty-heavy-512w.webp 512w, /img/posts/programming/mini-projects/optimising-web-icons/assets/fonts-are-pretty-heavy-612w.webp 612w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 612px"></a></p><p>I should take a step back. There are generally two established ways to handle icons on the web: 1) webfonts (plus CSS), and 2) inline SVGs (Scalable Vector Graphics). As its name suggests, SVGs scale nicely to any screen size and remove the need for font files. Both have their <a href="https://blog.fontawesome.com/webfont-vs-svg/" rel="noreferrer" target="_blank">use cases</a>, but the modern web recommends SVGs for general cases.</p><p>Due to historical reasons, this site uses webfonts; and unfortunately, replacing webfonts with SVGs is not a simple <em>find-and-replace</em>. If it were, I would've included it in this analysis. After a painful struggle migrating a few icons, I decided to postpone migration. Didn't really feel like tuning CSS.</p><p>So I turned my attention to slimming down webfonts like Garfield doing cardio. But before I explain the process, let's understand how icon webfonts work.</p><h2 id="icon-webfonts-under-the-hood" tabindex="-1"><a class="md-anchor" href="#icon-webfonts-under-the-hood" aria-hidden="true"></a> Icon Webfonts Under the Hood <i class="fa-brands fa-redhat"></i></h2><h3 id="fonts-and-unicode" tabindex="-1"><a class="md-anchor" href="#fonts-and-unicode" aria-hidden="true"></a> Fonts and Unicode <i class="fa-regular fa-face-smile"></i></h3><p>There are various font formats: WOFF, TrueType, OpenType. These are essentially different ways to compress and store fonts. WOFF2, for instance, is a modern compression format optimised for the web.<sup class="footnote-ref"><a href="#fn2" id="fnref2">2</a></sup></p><p>Ultimately, fonts are mappings from integer codepoints to glyphs. These codepoints are standardised by the <a href="https://www.unicode.org/standard/standard.html" rel="noreferrer" target="_blank">Unicode Standard</a> and are expressed in the format <code>U+[0-9A-F]{4,6}</code>, i.e. “U+” followed by 4-6 hexadecimal digits. For example, the number U+0030 maps to "0", and U+0041 maps to "A", U+2206 maps to "∆" (delta), and U+6C34 maps to "水".</p><div class="alert alert-warning d-flex align-items-start"><i class="fas fa-triangle-exclamation ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>Codepoints are <em>not</em> to be confused with UTF-8, UTF-16, and UTF-32, which are different ways to efficiently store Unicode characters in byte format.</p></div></div><p>You may be wondering: so what codepoints map to icons? This is up to icon packs to define. Since most icons are custom by nature, they're usually placed in custom regions known as Private Use Areas, reserved by the Unicode Standard. One such region is U+E000 – U+F8FF.</p><h3 id="fonts-and-css" tabindex="-1"><a class="md-anchor" href="#fonts-and-css" aria-hidden="true"></a> Fonts and CSS <i class="fa-brands fa-css3-alt"></i></h3><p>For webfonts to work, codepoints need to exist in the HTML text. But that's terribly inconvenient — writing magic numbers makes for hard-to-maintain code.</p><p>This is where CSS comes in. Specialised CSS rules connect the HTML code to the exact font glyph via a two-step process: 1) identifying the font file and 2) identifying the codepoint. Once the browser has these two pieces of information, it can render the glyph.</p><p>Suppose we write the following HTML code:</p><div class="code-toolbar"><pre data-lang-off="" class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-rocket<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span></code></pre><div class="toolbar"><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><ol><li><p>The font file is determined by matching the assigned font with the custom font face. The <code>fas</code> class is key here.</p><div class="code-toolbar"><pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">.fas</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Font Awesome 6 Free"</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 900<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Font Awesome 6 Free"</span><span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> 900<span class="token punctuation">;</span>
    <span class="token property">font-display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../webfonts/fa-solid-900.woff2<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"woff2"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../webfonts/fa-solid-900.ttf<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"truetype"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">CSS</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div></li><li><p>The codepoint is inserted with a <code>:before</code> pseudo-element. For <code>fa-rocket</code>, this is U+F135.</p><div class="code-toolbar"><pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">.fa-rocket:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"\f135"</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">CSS</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div></li></ol><p>It's a lot of indirection, and this is one reason why SVGs are preferred; but hey, this was the gold standard a decade ago.</p><h3 id="multiple-variants" tabindex="-1"><a class="md-anchor" href="#multiple-variants" aria-hidden="true"></a> Multiple Variants <i class="fas fa-circle"></i> <i class="far fa-circle"></i></h3><p>To complicate matters, FA fonts have different <strong>variants</strong>, and they modularise this by using the same codepoint, but separate font files. Not all fonts do this though. Devicon packs all their styles into a single font file. Here are some examples of FA styles.</p><div class="table-container icon-table"><table><thead><tr><th></th><th>Solid</th><th>Regular</th><th>Brands</th></tr></thead><tbody><tr><td><code>fa-star</code> (U+F005)</td><td><i class="fs-4 fas fa-star"></i></td><td><i class="fs-4 far fa-star"></i></td><td></td></tr><tr><td><code>fa-user</code> (U+F007)</td><td><i class="fs-4 fas fa-user"></i></td><td><i class="fs-4 far fa-user"></i></td><td></td></tr><tr><td><code>fa-thumbs-up</code> (U+F164)</td><td><i class="fs-4 fas fa-thumbs-up"></i></td><td><i class="fs-4 far fa-thumbs-up"></i></td><td></td></tr><tr><td><code>fa-github</code> (U+F09B)</td><td></td><td></td><td><i class="fs-4 fab fa-github"></i></td></tr></tbody></table></div><h2 id="an-icon-dieting-plan" tabindex="-1"><a class="md-anchor" href="#an-icon-dieting-plan" aria-hidden="true"></a> An Icon Dieting Plan <i class="fa-solid fa-dumbbell"></i></h2><p>With the backstory out of the way, let's discuss the high-level algorithm.</p><p>In my mind, all we have to do is post-process the generated static files like so:</p><ul><li>Crawl the HTML files for a Font Awesome CSS. Parse the CSS and associated WOFF2 font files.</li><li>Crawl the HTML files (and perhaps other files) for used icons.</li><li>Construct a font file containing the minimum icons. We may also need to remap codepoints to resolve clashes.</li><li>Construct a CSS file containing the new mappings from icon class (e.g. <code>.fa-star</code>) to codepoint.</li><li>Write the CSS and font files.</li><li>Replace the original CSS links with the new CSS file.</li><li>Celebrate!</li></ul><p>To no one's surprise, this shaved off more than 97% bytes. A success! Or is it?</p><h2 id="where-speed" tabindex="-1"><a class="md-anchor" href="#where-speed" aria-hidden="true"></a> Where speed? <i class="fa-solid fa-poo"></i></h2><p>As with many things in engineering, one metric rarely provides good coverage.</p><p>After integrating the minification into my build process, I excitedly waited for the site to build. I opened Chrome dev tools, loaded my site, and... what?! It was slower? Okay, maybe it was the first load, and the page wasn't cached on the edge.</p><p>But even after refreshing multiple times, the <strong>Time to First Byte (TTFB)</strong> was roughly the same compared to loading the original files.</p><p><a class="lightbox-single" title="Server - why u no fast?" href="/img/posts/programming/mini-projects/optimising-web-icons/assets/y-server-no-fast-500w.webp"><img class="mb-2 rw center jw-60" src="/img/posts/programming/mini-projects/optimising-web-icons/assets/y-server-no-fast-500w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 500 / 500" alt="Server - why u no fast?" title="Server - why u no fast?" srcset="/img/posts/programming/mini-projects/optimising-web-icons/assets/y-server-no-fast-256w.webp 256w, /img/posts/programming/mini-projects/optimising-web-icons/assets/y-server-no-fast-500w.webp 500w" sizes="(max-width: 256px) 256px, 500px"></a></p><p>The answer? CDN.</p><div class="alert alert-success d-flex align-items-start"><i class="fas fa-lightbulb ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>What is a CDN? CDNs (Content Delivery Networks) are servers deployed all over the globe, optimised to deliver assets such as JS, CSS, images, and fonts.</p><p>Moreover, if the file is guaranteed to <em>not</em> change (e.g. a versioned library asset), then the server can return a high browser cache duration, typically 1 year. Subsequent requests can just reuse the downloaded file.</p></div></div><p>The <a href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="noreferrer" target="_blank">original</a> <a href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/webfonts/fa-solid-900.woff2" rel="noreferrer" target="_blank">files</a> are delivered over a CDN. On the other hand, the minified files are served from Cloudflare Pages, which aren't optimised for low-latency delivery. Further, CF Pages may modify the URL/request/response via Page Rules or Cache Rules, and this extra server-side processing takes a toll on the response speed.</p><p>I benchmarked the response speed of delivery by CDN versus the site directory. The methodology is simple: collect download times from multiple points around the world, repeat this a couple times, and find the median. And we perform this for 6 different asset files.</p><p>Turns out, cdnjs.cloudflare.com delivers almost 50% faster.</p><table><thead><tr><th>Asset</th><th>Total Time (in ms)<sup class="footnote-ref"><a href="#fn3" id="fnref3">3</a></sup></th><th>Total Time x3 (in ms)<sup class="footnote-ref"><a href="#fn4" id="fnref4">4</a></sup></th></tr></thead><tbody><tr><td>CSS (cdn; unminified)</td><td>17</td><td>-</td></tr><tr><td>CSS (site; unminified)</td><td>29</td><td>-</td></tr><tr><td>CSS (site; minified)</td><td>29</td><td>-</td></tr><tr><td>Font (cdn; unminified)</td><td>21</td><td>63</td></tr><tr><td>Font (site; unminified)</td><td>38</td><td>114</td></tr><tr><td>Font (site; minified)</td><td>47<sup class="footnote-ref"><a href="#fn5" id="fnref5">5</a></sup></td><td>-</td></tr></tbody></table><p class="caption"><sup>Font Awesome Free 6 benchmark for downloading assets from a CDN vs Cloudflare site. Here, unminified/minified refers to whether files contain excess icons; it does not refer to excess whitespace. The expectation is that minified assets are faster. (<a href="https://docs.google.com/spreadsheets/d/1UBUJGIhmdYql2lPz5tYWn6A97iVz1V40YIC2d6iz_vo/view" rel="noreferrer" target="_blank">Data</a>)</sup></p><p>I did leave out one detail though. The minified font is packaged in <em>one</em> file. The original FA fonts are delivered in <em>three, separate</em> files (Solid, Regular, Brands). If we account for this by multiplying unminified font results by a factor of 3, I think it's fair to say we have ourselves a win.</p><div class="alert alert-info d-flex align-items-start"><i class="fas fa-circle-info ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>Another thing to consider: CDN assets may also be used by other sites, meaning the assets may already be cached. 10 sites using the same CDN font asset is better than 10 sites using minified font assets. If we browse these 10 sites, the former gives 1 set of downloads + 9 cache hits, while the latter has 10 sets of downloads + <em>0</em> cache hits.</p><p>Aside from the glaring potential for a delightful, thought-provoking discussion on collectivism and individualism, this begs the question: <em>is it really worth it?</em></p></div></div><h2 id="cache-busting-with-cloudflare-cache-rules" tabindex="-1"><a class="md-anchor" href="#cache-busting-with-cloudflare-cache-rules" aria-hidden="true"></a> Cache Busting with Cloudflare Cache Rules <i class="fa-solid fa-gavel"></i></h2><p>Similar to a CDN, we would like to take advantage of browser cache by providing a high cache time. This way, if the user visits the site across the week, they wouldn't need to re-download the measly 8kB of gzipped assets. This is ideal for sites that update sporadically.</p><p>You're probably thinking — come on, it's just 8kB, are you masochistic? And my response would be: it's a potential saving of 100ms for return visitors, and yes.</p><p>By default, Cloudflare Pages has a browser cache time of 4 hours. We can change this duration by modifying the <code>Cache-Control</code> header.</p><p><a class="lightbox-single" title="Creating a cache busting rule in Cloudflare. Cloudflare allows us to configure based on URI patterns." href="/img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-create-cache-busting-rule-2114w.webp"><img class="mb-2 rw center jw-100" src="/img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-create-cache-busting-rule-2114w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 2114 / 784" alt="Creating a cache busting rule in Cloudflare. Cloudflare allows us to configure based on URI patterns." title="Creating a cache busting rule in Cloudflare. Cloudflare allows us to configure based on URI patterns." srcset="/img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-create-cache-busting-rule-256w.webp 256w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-create-cache-busting-rule-512w.webp 512w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-create-cache-busting-rule-1024w.webp 1024w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-create-cache-busting-rule-2114w.webp 2114w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, (max-width: 1024px) 1024px, 2114px"></a></p><p class="caption"><sup>Create a cache-busting rule for URI paths starting with <code>/cb/</code>.</sup></p><p><a class="lightbox-single" title="Configure the browser cache duration to 1 year." href="/img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-set-browser-ttl-1708w.webp"><img class="mb-2 rw center jw-100" src="/img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-set-browser-ttl-1708w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 1708 / 554" alt="Configure the browser cache duration to 1 year." title="Configure the browser cache duration to 1 year." srcset="/img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-set-browser-ttl-256w.webp 256w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-set-browser-ttl-512w.webp 512w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-set-browser-ttl-1024w.webp 1024w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cloudflare-set-browser-ttl-1708w.webp 1708w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, (max-width: 1024px) 1024px, 1708px"></a></p><p class="caption"><sup>Set the cache time to 1 <s>century</s> year.</sup></p><p><a class="lightbox-single" title="We got the expected Cache Control header." href="/img/posts/programming/mini-projects/optimising-web-icons/assets/cache-busting-works-in-browser-1466w.webp"><img class="mb-2 rw center jw-100" src="/img/posts/programming/mini-projects/optimising-web-icons/assets/cache-busting-works-in-browser-1466w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 1466 / 934" alt="We got the expected Cache Control header." title="We got the expected Cache Control header." srcset="/img/posts/programming/mini-projects/optimising-web-icons/assets/cache-busting-works-in-browser-256w.webp 256w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cache-busting-works-in-browser-512w.webp 512w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cache-busting-works-in-browser-1024w.webp 1024w, /img/posts/programming/mini-projects/optimising-web-icons/assets/cache-busting-works-in-browser-1466w.webp 1466w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, (max-width: 1024px) 1024px, 1466px"></a></p><p class="caption"><sup>It works!</sup></p><p>We've applied cache-busting to the <code>/cb/</code> path. All that's left is to make sure our new assets are written to <code>_site/cb/</code>; but more importantly, that <strong>the file name changes between different versions</strong>. This is super important.</p><p>If we updated our CSS/font file, we need to tell the browser: "Hey! Download and cache the new version online. Don't use the old cached file!" Changing the file name is the best way to force a cache-miss. Nothing complex. We can just append the file hash to each file.</p><p>I used the first 8 bytes of MD5, but any common hash will do. Now our files resemble <code>/cb/webfonts/icons-10736075e7883838.woff2</code>.</p><p>We just need to propagate this to our CSS, then HTML files, and we're done!</p><h2 id="closing-remarks" tabindex="-1"><a class="md-anchor" href="#closing-remarks" aria-hidden="true"></a> Closing Remarks <i class="fa-solid fa-glass-water"></i></h2><p>The code is a bit of a handful, but I've uploaded it on GitHub: <a href="https://github.com/TrebledJ/icon-minifier" rel="noreferrer" target="_blank">TrebledJ/icon-minifier</a>. Taking inspiration from other projects, I designed it to work as a CLI tool, but you can also import the API. Currently, it only handles Font Awesome fonts. I may add other webfonts later, and maybe have an SVG integration. Pull requests are welcome.</p><p>I should also point out that icon minification isn't a new problem. In fact, there are <a href="https://github.com/aui/font-spider" rel="noreferrer" target="_blank">some</a> <a href="https://github.com/eHanlin/font-generator" rel="noreferrer" target="_blank">general</a> <a href="https://github.com/ecomfe/fontmin" rel="noreferrer" target="_blank">solutions</a> designed to minify fonts. These are designed to compress fonts with many characters such as Chinese, Korean, and Japanese; though some work with icons too. Of the three, <a href="https://github.com/aui/font-spider" rel="noreferrer" target="_blank">Font Spider</a> has the most comprehensive features.<sup class="footnote-ref"><a href="#fn6" id="fnref6">6</a></sup></p><p>Given the mediocre results, I'll continue keeping an eye on CDN performance and perhaps move on to better alternatives. Next step: mentally prepare myself to wrangle some CSS, and migrate to SVGs.</p><hr class="footnotes-sep"><b>Footnotes</b><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>287kB gzipped comes from fa-brands, plus fa-regular, plus fa-solid. Fortunately, these variants are only downloaded if used. 2000 icons just counts solid, regular, and brands. Imagine the number of icons if premium FA was used! <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://fonts.google.com/knowledge/glossary/web_font" rel="noreferrer" target="_blank">Google Font Glossary: Web Font</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p>Total Time includes DNS resolve time + connection time + download time. Times are sourced from <a href="https://www.uptrends.com/tools/cdn-performance-check" rel="noreferrer" target="_blank">uptrends.com</a>. (Not sponsored. It just seems to have the largest coverage.) <a href="#fnref3" class="footnote-backref">↩︎</a></p></li><li id="fn4" class="footnote-item"><p>Total Time x3 applies when multiple font files are downloaded. This is used to provide a more accurate representation of resources used. <a href="#fnref4" class="footnote-backref">↩︎</a></p></li><li id="fn5" class="footnote-item"><p>The deviation between "Font (site; <em>unminified</em>)" and "Font (site; <em>minified</em>)" is most likely due to network latency and jitter. <a href="#fnref5" class="footnote-backref">↩︎</a></p></li><li id="fn6" class="footnote-item"><p>It even has a punny Chinese name! 字蛛! <a href="#fnref6" class="footnote-backref">↩︎</a></p></li></ol></section></div><a id="end-of-article"></a><br><script defer src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><div class="post-share dim-gentle mb-3 d-flex flex-row align-items-center"><div class="d-flex flex-row flex-wrap align-items-center gap-3"><span>Share&nbsp;on</span> <a class="no-decoration" data-sharer="reddit" data-title="Optimising Web Icons for Fun" data-url="/posts/optimising-web-icons-for-fun/"><span class="fs-4"><i class="fab fa-reddit"></i> </span></a><a class="no-decoration" data-sharer="telegram" data-title="Optimising Web Icons for Fun" data-url="/posts/optimising-web-icons-for-fun/"><span class="fs-4"><i class="fab fa-telegram"></i> </span></a><a class="no-decoration" data-sharer="whatsapp" data-title="Optimising Web Icons for Fun" data-url="/posts/optimising-web-icons-for-fun/"><span class="fs-4"><i class="fab fa-whatsapp"></i> </span></a><a class="no-decoration" data-sharer="linkedin" data-title="Optimising Web Icons for Fun" data-url="/posts/optimising-web-icons-for-fun/"><span class="fs-4"><i class="fab fa-linkedin"></i> </span></a><a class="no-decoration" data-sharer="vk" data-title="Optimising Web Icons for Fun" data-url="/posts/optimising-web-icons-for-fun/"><span class="fs-4"><i class="fab fa-vk"></i> </span></a><a class="no-decoration" data-sharer="twitter" data-title="Optimising Web Icons for Fun" data-url="/posts/optimising-web-icons-for-fun/"><span class="fs-4"><i class="fab fa-twitter"></i> </span></a><a id="copy-link-button" class="no-decoration" data-bs-toggle="tooltip" data-bs-trigger="click" title="Link copied!"><span class="fs-4"><i class="fas fa-link"></i></span></a></div></div><hr><div id="post-author-container" class="d-flex justify-content-between align-items-center gap-3" itemprop="author" itemscope itemtype="https://schema.org/Person"><img src="/img/profile-icon.jpg" class="profile-img" alt="" loading="lazy" decoding="async" itemprop="image"><div class="author-info d-flex flex-column gap-1"><p class="profile-name" itemprop="name">TrebledJ</p><p class="profile-bio" itemprop="description">Passionate problem-solver, pentester, and autodidact. I thrive on learning new things and enjoy passing it on. When not immersed in bughunting or programming, I can be found taking walks, composing a short tune, and occasionally indulging in CTF challenges.</p></div></div><hr class="section-sep"><div id="related" class="jw-100"><h3><i class="fas fa-circle-nodes me-2"></i>Related Posts</h3><div class="row gx-3 mt-4"><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/prism-plugins-in-node/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/prism-plugins-in-node/"><img class="post-img-blurred-bg" src="/img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 512" alt="Thumbnail for How to Use PrismJS Plugins with NodeJS and MarkdownIt" srcset="/img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-256w.webp 256w, /img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-512w.webp 512w, /img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-1024w.webp 1024w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 512" alt="Thumbnail for How to Use PrismJS Plugins with NodeJS and MarkdownIt" srcset="/img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-256w.webp 256w, /img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-512w.webp 512w, /img/posts/programming/mini-projects/prism-plugins-in-node/assets/thumbnail-1024w.webp 1024w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">How to Use PrismJS Plugins with NodeJS and MarkdownIt</h2><div class="post-summary"><p>Improve your storytelling with these dead simple hacks for rendering fancy Prism plugins in Node!</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/web/" itemprop="keywords">web</a> </span><span><a class="jtag" href="/tags/js/" itemprop="keywords">js</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/abusing-server-side-rendering-in-drogon/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/abusing-server-side-rendering-in-drogon/"><img class="post-img-blurred-bg" src="/img/posts/infosec/drogon-csp/assets/drogon-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 288" alt="Thumbnail for Dynamic Views Loading – Abusing Server Side Rendering in Drogon" srcset="/img/posts/infosec/drogon-csp/assets/drogon-thumbnail-256w.webp 256w, /img/posts/infosec/drogon-csp/assets/drogon-thumbnail-512w.webp 512w, /img/posts/infosec/drogon-csp/assets/drogon-thumbnail-1024w.webp 1024w, /img/posts/infosec/drogon-csp/assets/drogon-thumbnail-1600w.webp 1600w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/infosec/drogon-csp/assets/drogon-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 288" alt="Thumbnail for Dynamic Views Loading – Abusing Server Side Rendering in Drogon" srcset="/img/posts/infosec/drogon-csp/assets/drogon-thumbnail-256w.webp 256w, /img/posts/infosec/drogon-csp/assets/drogon-thumbnail-512w.webp 512w, /img/posts/infosec/drogon-csp/assets/drogon-thumbnail-1024w.webp 1024w, /img/posts/infosec/drogon-csp/assets/drogon-thumbnail-1600w.webp 1600w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Dynamic Views Loading – Abusing Server Side Rendering in Drogon</h2><div class="post-summary"><p>What could go wrong releasing a C++ web server with "live reload" into the wild?</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/infosec/" itemprop="keywords">infosec</a> </span><span><a class="jtag" href="/tags/cpp/" itemprop="keywords">cpp</a> </span><span><a class="jtag" href="/tags/ctf/" itemprop="keywords">ctf</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/automating-boolean-sql-injection-with-python/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/automating-boolean-sql-injection-with-python/"><img class="post-img-blurred-bg" src="/img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 273" alt="Thumbnail for Automating Boolean-Based SQL Injection with Python" srcset="/img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-256w.webp 256w, /img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-512w.webp 512w, /img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-1024w.webp 1024w, /img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-1800w.webp 1800w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 273" alt="Thumbnail for Automating Boolean-Based SQL Injection with Python" srcset="/img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-256w.webp 256w, /img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-512w.webp 512w, /img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-1024w.webp 1024w, /img/posts/infosec/automating-boolean-sqli/assets/automating-boolean-sqli-thumbnail-1800w.webp 1800w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Automating Boolean-Based SQL Injection with Python</h2><div class="post-summary"><p>How to be efficiently lazy at finding hidden gems in predictable places –&nbsp;Database Edition</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/infosec/" itemprop="keywords">infosec</a> </span><span><a class="jtag" href="/tags/sql/" itemprop="keywords">sql</a> </span><span><a class="jtag" href="/tags/python/" itemprop="keywords">python</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/dynamic-memory-embedded-bad/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/dynamic-memory-embedded-bad/"><img class="post-img-blurred-bg" src="/img/posts/programming/embedded/assets/dynamic-memory-1-500w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 500 / 560" alt="Thumbnail for Why Dynamic Memory Allocation Bad (for Embedded)" srcset="/img/posts/programming/embedded/assets/dynamic-memory-1-256w.webp 256w, /img/posts/programming/embedded/assets/dynamic-memory-1-500w.webp 500w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 500px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/embedded/assets/dynamic-memory-1-500w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 500 / 560" alt="Thumbnail for Why Dynamic Memory Allocation Bad (for Embedded)" srcset="/img/posts/programming/embedded/assets/dynamic-memory-1-256w.webp 256w, /img/posts/programming/embedded/assets/dynamic-memory-1-500w.webp 500w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 500px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Why Dynamic Memory Allocation Bad (for Embedded)</h2><div class="post-summary"><p>If you need flexibility and can afford it, use dynamic memory. If you can’t afford it, use static.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/embedded/" itemprop="keywords">embedded</a> </span><span><a class="jtag" href="/tags/c/" itemprop="keywords">c</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/site-migration-to-eleventy/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/site-migration-to-eleventy/"><img class="post-img-blurred-bg" src="/img/posts/misc/meta/assets/ogle-ogle-eleventy-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 341" alt="Thumbnail for Site Migration to Eleventy" srcset="/img/posts/misc/meta/assets/ogle-ogle-eleventy-256w.webp 256w, /img/posts/misc/meta/assets/ogle-ogle-eleventy-512w.webp 512w, /img/posts/misc/meta/assets/ogle-ogle-eleventy-750w.webp 750w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/misc/meta/assets/ogle-ogle-eleventy-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 341" alt="Thumbnail for Site Migration to Eleventy" srcset="/img/posts/misc/meta/assets/ogle-ogle-eleventy-256w.webp 256w, /img/posts/misc/meta/assets/ogle-ogle-eleventy-512w.webp 512w, /img/posts/misc/meta/assets/ogle-ogle-eleventy-750w.webp 750w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Site Migration to Eleventy</h2><div class="post-summary"><p>JavaScript go brrrrrrrrr.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/meta/" itemprop="keywords">meta</a> </span><span><a class="jtag" href="/tags/writeup/" itemprop="keywords">writeup</a> </span><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a></span></div></div></div></div></article></div></div><hr><h3><i class="fas fa-tags me-2"></i>Related Tags</h3><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to performance, programming, software-engineering, web">software.general</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/programming/">programming</a> <a class="jtag" href="/tags/software-engineering/">software-engineering</a> <a class="jtag" href="/tags/web/">web</a> <a class="jtag" href="/tags/aoc/">aoc</a> <a class="jtag" href="/tags/apps/">apps</a> <a class="jtag" href="/tags/dsp/">dsp</a> <a class="jtag" href="/tags/programming-languages/">programming-languages</a> <a class="jtag" href="/tags/linux/">linux</a> <a class="jtag" href="/tags/performance/">performance</a> <a class="jtag" href="/tags/functional/">functional</a> <a class="jtag" href="/tags/types/">types</a> <a class="jtag" href="/tags/windows/">windows</a> <a class="jtag" href="/tags/ai/">ai</a> <a class="jtag" href="/tags/metaprogramming/">metaprogramming</a> <a class="jtag" href="/tags/oop/">oop</a></span></div><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to meta, notes, project, writeup">misc</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/writeup/">writeup</a> <a class="jtag" href="/tags/notes/">notes</a> <a class="jtag" href="/tags/tutorial/">tutorial</a> <a class="jtag" href="/tags/reflection/">reflection</a> <a class="jtag" href="/tags/hkust/">hkust</a> <a class="jtag" href="/tags/project/">project</a> <a class="jtag" href="/tags/experience/">experience</a> <a class="jtag" href="/tags/faith/">faith</a> <a class="jtag" href="/tags/meta/">meta</a> <a class="jtag" href="/tags/learning/">learning</a> <a class="jtag" href="/tags/mathematics/">mathematics</a> <a class="jtag" href="/tags/cheatsheet/">cheatsheet</a> <a class="jtag" href="/tags/research/">research</a> <a class="jtag" href="/tags/satire/">satire</a> <a class="jtag" href="/tags/essay/">essay</a> <a class="jtag" href="/tags/reading/">reading</a></span></div></div><hr class="section-sep"><div class="container-md mt-4 p-4"><a id="comments"></a><p><em>Comments are back! Privacy-focused, without ads, bloatware 🤮, and trackers. Be one of the first to contribute to the discussion — I'd love to hear your thoughts.</em></p><script defer src="https://trebledj.me/js/comentario.min.js"></script><comentario-comments id="comentario" auto-init="false" no-fonts="true" css-override="false" theme="dark"></comentario-comments></div><br></div></div></article></div></div></div><footer class="d-flex flex-column gap-2"><div class="d-flex flex-row gap-3 mx-auto" style="width:fit-content;"><a rel="me noreferrer" href="https://github.com/TrebledJ" target="_blank"><i class="social-icon fab fa-github" style="color:rgb(150, 60, 180) !important;"></i> </a><a rel="me noreferrer" href="https://stackoverflow.com/users/10239789/trebledj" target="_blank"><i class="social-icon fab fa-stack-overflow" style="color:rgb(236, 124, 34) !important;"></i> </a><a rel="me noreferrer" href="https://www.codingame.com/profile/8444100ecb9723c1ec542346b0630aaa2821532" target="_blank"><i class="social-icon d-flex flex-column"><img src="/img/logos/codingame.webp" alt="" loading="lazy" decoding="async"></i></a><a rel="me noreferrer" href="https://soundcloud.com/trebledj" target="_blank"><i class="social-icon fab fa-soundcloud" style="color:rgb(237, 110, 30) !important;"></i> </a><a rel="me noreferrer" href="https://musescore.com/user/20636901" target="_blank"><i class="social-icon d-flex flex-column"><img src="/img/logos/musescore.webp" alt="" loading="lazy" decoding="async"></i></a><a rel="me noreferrer" href="https://discordapp.com/users/220427982798454794" target="_blank"><i class="social-icon fab fa-discord" style="color:rgb(84, 100, 235) !important;"></i> </a><a rel="me" href="mailto:trebledjjj@gmail.com"><i class="social-icon fas fa-envelope"></i> </a><a rel="me" href="/feeds"><i class="social-icon fas fa-square-rss"></i></a></div><p>Copyright&nbsp;©&nbsp;2025&nbsp;TrebledJ • <a href="/privacy-policy">Privacy&nbsp;Policy</a> • <a href="https://github.com/TrebledJ/trebledj.github.io?tab=readme-ov-file#credits--appreciation" rel="noreferrer" target="_blank">Credits</a></p></footer><script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js"></script><script>var tocOptions={}</script><script defer src="/cb/MPnrKnjI5w.js"></script><script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;52d99b3d385b4c9a98ac8ad109a95a2a&quot;}"></script></body></html>