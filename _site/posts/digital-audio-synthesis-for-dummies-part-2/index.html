<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Digital Audio Synthesis for Dummies: Part 2 - TrebledJ's Pages</title><meta name="description" content="Generating audio signals for great good through additive synthesis and wavetable synthesis."><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="trebledj,digital audio synthesis for dummies: part 2,generating audio signals for great good through additive synthesis and wavetable synthesis.,programming,tutorial,dsp,c,cpp,music,audio-synthesis-for-dummies,synths,notes"><meta name="robots" content="index,follow"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'sha256-Wv9Tjjg7Y7X5sBbP5AXqAQJA6+eewSRUjoPhNczfpnM=' 'sha256-FBtdNYnNdsvTKcrNIznI+jwGwhW3pNA5x/yQUw8jOPA=' 'sha256-5e8R4YC3Atf/5McNMkFk4TZYUtMEItdy9ikt1KUoPSc=' 'sha256-qlkNkQyGC5u9Brt4wwVi0MsPO/hVdrz3rzXuWYIkAbM=' 'sha256-J+ryCgKrW+QOH4xdCyPd6R5W3u9wJkXayR7KvtlnCnQ=' 'sha256-kQnTuA4pPVYgo0bCEGXSCEkD+CzMbRrhb5Cn58IydSA=' 'sha256-Deekn20h+++EarpL0nFQLX7JSJv7s/2W9f988ZFAh14=' comments.trebledj.me code.jquery.com cdn.jsdelivr.net gist.github.com static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' comments.trebledj.me cdn.jsdelivr.net cdnjs.cloudflare.com github.githubassets.com; font-src 'self' data: comments.trebledj.me cdn.jsdelivr.net cdnjs.cloudflare.com; img-src 'self' data: comments.trebledj.me; frame-src 'self' *.soundcloud.com; connect-src 'self' comments.trebledj.me wss://comments.trebledj.me cloudflareinsights.com formcarry.com;"><link href="/feeds/posts.xml" rel="alternate" title="RSS Feed for TrebledJ's Pages" type="application/rss+xml"><meta property="og:site_name" content="TrebledJ's Pages"><meta property="og:type" content="article"><meta property="og:title" content="Digital Audio Synthesis for Dummies: Part 2 - TrebledJ's Pages"><meta property="twitter:title" content="Digital Audio Synthesis for Dummies: Part 2 - TrebledJ's Pages"><meta property="og:description" content="Generating audio signals for great good through additive synthesis and wavetable synthesis.

This is the second post in a series of posts on Digital Audio Processing. Similar to the previous post, this post stems from a lil’ MIDI keyboard project I worked..."><meta property="twitter:description" content="Generating audio signals for great good through additive synthesis and wavetable synthesis.

This is the second post in a series of posts on Digital Audio Processing. Similar to the previous post, this post stems from a lil’ MIDI keyboard project I worked..."><meta property="og:url" content="https://trebledj.me/posts/digital-audio-synthesis-for-dummies-part-2/"><meta name="twitter:card" content="summary_large_image"><meta property="og:image" content="https://trebledj.me/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-2-1024w.webp"><meta property="twitter:image" content="https://trebledj.me/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-2-1024w.webp"><meta property="article:published_time" content="2023-03-09T00:00:00.000Z"><meta property="article:author" content="TrebledJ"><meta property="article:section" content="programming"><meta property="article:tag" content="programming"><meta property="article:tag" content="tutorial"><meta property="article:tag" content="dsp"><meta property="article:tag" content="c"><meta property="article:tag" content="cpp"><meta property="article:tag" content="music"><meta property="article:tag" content="audio-synthesis-for-dummies"><meta property="article:tag" content="synths"><meta property="article:tag" content="notes"><script type="application/ld+json">{"@context": "https://schema.org","@type": "WebSite","name": "TrebledJ's Pages","url": "https://trebledj.me"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/cb/css/icons-6e60ae6c5e022aba.css"><link rel="stylesheet" href="/cb/x2ljFSZBUH.css" media="print"><style></style><script>document.querySelectorAll('link[media|="print"]').forEach(e=>{e.addEventListener("load",()=>e.media="all"),e.sheet&&(e.media="all")})</script><script>const defaultTheme="dark";let icon=void 0;var reloadDisqus=void 0;function modeInit(){var e=localStorage.getItem("theme");setMode("dark"===e?"dark":"light"===e?"light":defaultTheme)}function modeInitIcon(){icon=document.getElementById("mode-switch-icon"),isLightTheme()&&(icon.classList.remove("fa-moon"),icon.classList.add("fa-sun"),icon.classList.add("mode-switch-transform"))}function isLightTheme(){return"light"===localStorage.getItem("theme")}function modeSwitcher(){var e=localStorage.getItem("theme");"dark"===e?(setMode("light"),reloadDisqus&&reloadDisqus()):"light"===e?(setMode("dark"),reloadDisqus&&reloadDisqus()):setMode(defaultTheme)}function setMode(e){"dark"===e?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):"light"===e&&(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")),icon&&(icon.classList.toggle("fa-moon"),icon.classList.toggle("fa-sun"),icon.classList.toggle("mode-switch-transform"))}modeInit(),document.addEventListener("DOMContentLoaded",()=>{document.getElementById("mode-switch").addEventListener("click",()=>{modeSwitcher()})})</script><script defer src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><link rel="stylesheet" href="/css/comments.css"><link rel="icon" href="/favicon.ico" type="image/x-icon"></head><body><header><nav class="navbar navbar-expand-md py-2"><div class="container-fluid justify-content-between align-items-center"><button aria-controls="navbar-container" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler shadow-none" data-bs-target="#navbar-container" data-bs-toggle="collapse" type="button"><span id="navbar-toggler-icon"><i class="fas fa-bars"></i></span></button> <a class="navbar-brand no-decoration" href="/">TrebledJ's Pages</a><div class="navbar-collapse collapse" id="navbar-container"><ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/posts">Posts</a></li><li class="nav-item"><a class="nav-link" href="/music">Music</a></li></ul><ul class="navbar-nav"><li><a class="nav-link me-2" data-bs-toggle="modal" data-bs-target="#search-modal" aria-label="Search..." role="button"><i class="fas fa-search nav-icon"></i></a></li><li><a class="nav-link" id="mode-switch" aria-label="Theme Switch" role="button"><i id="mode-switch-icon" class="fas fa-moon nav-icon"></i></a><script>modeInitIcon()</script></li></ul></div></div></nav><div id="scroll-progress-bar"></div></header><div id="top-of-the-morning-to-you"></div><div id="search-modal" class="modal fade wide-modal" aria-hidden="true" aria-label="Search" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header pb-2 d-flex flex-row justify-content-between"><div class="container-fluid ps-0" id="search-box-container"><input type="text" autofocus class="container-fluid" id="search-box" placeholder="Search"> <i class="fas fa-search"></i></div><button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button></div><div class="modal-body" id="search-results-list"></div></div></div></div><button id="btn-back-to-top" class="btn btn-lg" type="button" aria-label="Back to Top"><i class="fas fa-arrow-up"></i></button><div id="btn-mobile-toc" class="dropup"><button type="button" class="btn btn-lg" data-bs-toggle="dropdown" aria-label="Content"><i class="fas fa-list-ul"></i></button><ul class="dropdown-menu toc-container"><li><nav class="toc"><ol><li><a href="#audio-synthesis">Audio Synthesis 🎶</a></li><li><a href="#buffering">Buffering 📦</a></li><li><a href="#the-fourier-theorem">The Fourier Theorem 📊</a></li><li><a href="#additive-synthesis">Additive Synthesis ➕</a></li><li><a href="#fundamental-frequency">Fundamental Frequency</a></li><li><a href="#wavetable-synthesis">Wavetable Synthesis 🌊</a></li><li><a href="#recap">Recap 🔁</a></li></ol></nav></li></ul></div><div class="main-container"><div class="page-container col-lg-12"><div class="container-lg px-0"><article class="jw-100 post-article" itemscope itemtype="http://schema.org/BlogPosting"><div class="row flex-row-reverse gx-lg-5"><div class="col-lg-4 d-none d-lg-block"><div class="dim-deep"><div class="metadata-container d-flex"><div class="d-flex flex-row align-items-center"><span><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-posted-date">Posted on <span itemprop="datePublished" content="2023-03-09T08:00:00.000+08:00">2023‑03‑09</span></span></div><div class="d-flex flex-row align-items-center"><span class="post-updated-date-icon"><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-updated-date">Updated on <span itemprop="dateModified" content="2024-01-06T22:12:38.000+08:00">2024‑01‑06</span></span></div><div class="d-flex flex-row align-items-center"><span><i class="far fa-clock post-meta-icon me-1"></i> </span><span class="fs-7">8 minute read</span></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><span><i class="fas fa-tag post-meta-icon me-1 mt-2"></i></span><div class="tag-list d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/tutorial/" itemprop="keywords">tutorial</a> </span><span><a class="jtag" href="/tags/dsp/" itemprop="keywords">dsp</a> </span><span><a class="jtag" href="/tags/c/" itemprop="keywords">c</a> </span><span><a class="jtag" href="/tags/cpp/" itemprop="keywords">cpp</a> </span><span><a class="jtag" href="/tags/music/" itemprop="keywords">music</a> </span><span><a class="jtag special" href="/tags/audio-synthesis-for-dummies/" itemprop="keywords">audio-synthesis-for-dummies</a> </span><span><a class="jtag" href="/tags/synths/" itemprop="keywords">synths</a> </span><span><a class="jtag" href="/tags/notes/" itemprop="keywords">notes</a></span></div></div></div><br><div id="toc-sidebar" class="sticky-right dim-deep dim-if-dark"><div class="toc-container"><span><a id="toc-content" href="javascript:void(0);">Content</a></span><nav class="toc"><ol><li><a href="#audio-synthesis">Audio Synthesis 🎶</a></li><li><a href="#buffering">Buffering 📦</a></li><li><a href="#the-fourier-theorem">The Fourier Theorem 📊</a></li><li><a href="#additive-synthesis">Additive Synthesis ➕</a></li><li><a href="#fundamental-frequency">Fundamental Frequency</a></li><li><a href="#wavetable-synthesis">Wavetable Synthesis 🌊</a></li><li><a href="#recap">Recap 🔁</a></li></ol></nav><hr></div><div class="toc-link-container"><span><a href="#related">Related Posts</a></span></div><div class="toc-link-container"><span><a href="#comments">Comments</a></span></div></div></div><div class="col-lg-8 post-body-container"><div class="article-header"><h1 class="post-title" itemprop="name headline">Digital Audio Synthesis for Dummies: Part&nbsp;2</h1><p class="post-desc" itemprop="alternativeHeadline">Generating audio signals for great good through additive synthesis and wavetable synthesis.</p><div class="d-lg-none dim-deep"><div class="metadata-container d-flex"><div class="d-flex flex-row align-items-center"><span><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-posted-date">Posted on <span itemprop="datePublished" content="2023-03-09T08:00:00.000+08:00">2023‑03‑09</span></span></div><div class="d-flex flex-row align-items-center"><span class="post-updated-date-icon"><i class="fas fa-calendar post-meta-icon me-1"></i> </span><span class="fs-7 post-updated-date">Updated on <span itemprop="dateModified" content="2024-01-06T22:12:38.000+08:00">2024‑01‑06</span></span></div><div class="d-flex flex-row align-items-center"><span><i class="far fa-clock post-meta-icon me-1"></i> </span><span class="fs-7">8 minute read</span></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><span><i class="fas fa-tag post-meta-icon me-1 mt-2"></i></span><div class="tag-list d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/tutorial/" itemprop="keywords">tutorial</a> </span><span><a class="jtag" href="/tags/dsp/" itemprop="keywords">dsp</a> </span><span><a class="jtag" href="/tags/c/" itemprop="keywords">c</a> </span><span><a class="jtag" href="/tags/cpp/" itemprop="keywords">cpp</a> </span><span><a class="jtag" href="/tags/music/" itemprop="keywords">music</a> </span><span><a class="jtag special" href="/tags/audio-synthesis-for-dummies/" itemprop="keywords">audio-synthesis-for-dummies</a> </span><span><a class="jtag" href="/tags/synths/" itemprop="keywords">synths</a> </span><span><a class="jtag" href="/tags/notes/" itemprop="keywords">notes</a></span></div></div></div></div><hr><div class="post-body text-content" itemprop="articleBody text"><p>This is the second post in a series of posts on Digital Audio Processing. Similar to the <a href="/posts/digital-audio-synthesis-for-dummies-part-1">previous post</a>, this post stems from a lil’ <a href="/posts/stm32-midi-keyboard">MIDI keyboard</a> project I worked on last semester and is an attempt to share the knowledge I've gained with others. This post will dive into the wonderful world of audio synthesis and introduce two important synthesis techniques: additive synthesis and wavetable synthesis.</p><h2 id="audio-synthesis" tabindex="-1"><a class="md-anchor" href="#audio-synthesis" aria-hidden="true"></a> Audio Synthesis 🎶</h2><p>Where do audio signals come from? Our signal might be…</p><ul><li><strong>recorded</strong>. Sound waves are picked up by special hardware (e.g. a microphone) and translated to a digital signal through an <abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Analog-to-Digital Converter">ADC</abbr>.</li><li><strong>loaded</strong> from a file. There are many audio formats out there, but the most common ones are .wav and .mp3. The .wav format is simple: just store the samples as-is. Other formats compress audio to achieve smaller file sizes (which in turn, means faster upload/download speeds).</li><li><strong>synthesised</strong>. We generate audio out of thin air (or rather, code and electronics).</li></ul><p>I’ll mainly focus on <strong>synthesis</strong>. We’ll start by finding out how to generate a single tone, then learn how to generate multiple tones simultaneously.</p><h2 id="buffering" tabindex="-1"><a class="md-anchor" href="#buffering" aria-hidden="true"></a> Buffering 📦</h2><p>A naive approach to generate audio might be:</p><ol><li>Process one sample</li><li>Feed it to the <abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Digital-to-Analogue Converter">DAC</abbr>/speaker</li></ol><p>But there are several issues with this: function call overhead may impact performance, and we have little room left to do other things. For the sound to play smoothly while sampling at 44100Hz, each sample needs to be delivered within $\frac{1}{44100}$ s = $22.6$ µs.</p><p>A better approach is to use a <em>buffer</em> and work in batches. The buffer will hold onto our samples before feeding it to the speaker.</p><ol><li>Process $N$ samples and store them in a buffer</li><li>Feed all $N$ samples to the DAC/speaker</li></ol><p>We'll focus more on step 1 (processing) for now. We'll cover step 2 (output) in the next post.</p><div class="alert alert-info d-flex align-items-start"><i class="fas fa-circle-info ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>In a previous post, we discussed <a href="/posts/digital-audio-synthesis-for-dummies-part-1#quantisation">quantisation</a> and how different representations (such as integers and floats) are suited for different tasks. Integers are discrete numbers, while floats are (imprecise) real numbers. Since we're concerned with audio processing, we'll be using floats and quantising from -1 to 1.</p></div></div><p>In C/C++, we can generate a sine tone like so:</p><div class="code-toolbar"><pre class="language-cpp" tabindex="0"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SAMPLE_RATE</span> <span class="token expression"><span class="token number">44100</span>  </span><span class="token comment">// Number of samples per second.</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BUFFER_SIZE</span> <span class="token expression"><span class="token number">1024</span>   </span><span class="token comment">// Length of the buffer.</span></span>

<span class="token comment">// Define an array for storing samples.</span>
<span class="token keyword">float</span> buffer<span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Buffer of samples to populate, each ranging from -1 to 1.</span>

<span class="token comment">/**
 * Generate samples of a sine wave and store them in a buffer.
 * @param freq  Frequency of the sine wave, in Hz.
 */</span>
<span class="token keyword">void</span> <span class="token function">generate_samples</span><span class="token punctuation">(</span><span class="token keyword">float</span> freq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Populate the buffer with a sine tone with frequency `freq`.</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> BUFFER_SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        buffer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> PI <span class="token operator">*</span> freq <span class="token operator">*</span> i <span class="token operator">/</span> SAMPLE_RATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">C++</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>And that’s it—we’ve just whooshed pure sine tone goodness from nothing! Granted, there are some flaws with this method (it could be more efficient, and the signal clicks when repeated); but hey, it demonstrates synthesis.</p><div class="alert alert-info d-flex align-items-start"><i class="fas fa-bolt ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>Note on Buffers: Usually, the buffer size is medium-sized power of 2 (e.g. 512, 1024, 2048, 4096...). This enhances cache loads and processing speed (dividing by a power of 2 is super easy for processors!).<sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></p></div></div><h2 id="the-fourier-theorem" tabindex="-1"><a class="md-anchor" href="#the-fourier-theorem" aria-hidden="true"></a> The Fourier Theorem 📊</h2><p>One fundamental theorem in signal processing is the <strong>Fourier Theorem</strong>, which relates to the composition of signals. It can be summarised into:</p><blockquote><p>Any <em>periodic</em> signal can be <em>broken down</em> into a <em>sum</em> of sine waves.</p></blockquote><p>We can express this mathematically as $$ f(x) = a_0\sin(f_0x + b_0) + a_1\sin(f_1x + b_1) + \cdots + a_n\sin(f_nx + b_n) $$ where $a_i$, $f_i$, and $b_i$ are the amplitude, frequency, and phase of each constituent sine wave.</p><p><a class="lightbox-single" title="Skipper's partial to Fourier. They're the best of chums." href="/img/posts/programming/digital-audio-synthesis/assets/fourier-analysis-1125w.webp"><img class="mb-2 rw center jw-55" src="/img/posts/programming/digital-audio-synthesis/assets/fourier-analysis-1125w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 1125 / 832" alt="Skipper's partial to Fourier. They're the best of chums." title="Skipper's partial to Fourier. They're the best of chums." srcset="/img/posts/programming/digital-audio-synthesis/assets/fourier-analysis-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/fourier-analysis-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/fourier-analysis-1024w.webp 1024w, /img/posts/programming/digital-audio-synthesis/assets/fourier-analysis-1125w.webp 1125w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, (max-width: 1024px) 1024px, 1125px"></a></p><div class="alert alert-info d-flex align-items-start"><i class="fas fa-bolt ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>The Fourier Theorem and Fourier Transform are ubiquitous in modern day technology. It is the basis for many audio processing techniques such as filtering, equalisation, and noise cancellation. By manipulating the individual sine waves that make up a sound, we can alter its characteristics and create new sounds. The Fourier Transform is also a key component in compression, such as the JPG image format.</p></div></div><p>What’s cool about this theorem is that we can apply it the other way: any periodic signal can be <em>generated</em> by adding sine waves. This lays the groundwork for additive synthesis and generating audio with multiple pitches (e.g. a chord).</p><h2 id="additive-synthesis" tabindex="-1"><a class="md-anchor" href="#additive-synthesis" aria-hidden="true"></a> Additive Synthesis ➕</h2><p>The principle of <strong>additive synthesis</strong> is pretty straightforward: signals can be combined by adding samples along time.</p><p><a class="lightbox-single" title="Example of additive synthesis, localised on this very webpage." href="/img/posts/programming/digital-audio-synthesis/assets/additive-synthesis-640w.webp"><img class="mb-2 rw center jw-65" src="/img/posts/programming/digital-audio-synthesis/assets/additive-synthesis-640w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 640 / 480" alt="Example of additive synthesis, localised on this very webpage." title="Example of additive synthesis, localised on this very webpage." srcset="/img/posts/programming/digital-audio-synthesis/assets/additive-synthesis-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/additive-synthesis-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/additive-synthesis-640w.webp 640w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 640px"></a></p><p class="caption"><sup>Example of additive synthesis. The first and second signal show pure sine tones at 440Hz ($s_1$) and 660Hz ($s_2$). The third signal adds the two signals ($s_1 + s_2$). The fourth signal scales the third signal down to fit within $[-1, 1]$ ($(s_1 + s_2) / 2$). (<a href="https://gist.github.com/TrebledJ/14b8842ef3696b09e299c34ba0da9e6c" rel="noreferrer" target="_blank">Source Code</a>)</sup></p><p>To sound another pitch, we simply add a second sine wave to the buffer.</p><div class="code-toolbar"><pre class="language-cpp" tabindex="0"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SAMPLE_RATE</span> <span class="token expression"><span class="token number">44100</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BUFFER_SIZE</span> <span class="token expression"><span class="token number">1024</span></span></span>

<span class="token keyword">float</span> buffer<span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Generate samples of two sine waves played together and store them in a buffer.
 * @param freq  Frequency of the first sine wave, in Hz.
 * @param freq2 Frequency of the second sine wave, in Hz.
 */</span>
<span class="token keyword">void</span> <span class="token function">generate_samples2</span><span class="token punctuation">(</span><span class="token keyword">float</span> freq<span class="token punctuation">,</span> <span class="token keyword">float</span> freq2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> BUFFER_SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        buffer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.5f</span> <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> PI <span class="token operator">*</span> freq <span class="token operator">*</span> i <span class="token operator">/</span> SAMPLE_RATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">0.5f</span> <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> PI <span class="token operator">*</span> freq2 <span class="token operator">*</span> i <span class="token operator">/</span> SAMPLE_RATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">C++</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>Again, the code above populates the buffer with 1024 samples of audio. But this time, we introduced a second frequency <code>freq2</code> and added a second sample to the buffer. We also made sure to scale the resulting sample back down to the $[-1, 1]$ range by multiplying each sample by 0.5.</p><p>We can see additive synthesis in action with some help from <a href="https://www.audacityteam.org/" rel="noreferrer" target="_blank">Audacity</a>.</p><ul><li>Let’s start off with one tone.<ul><li>Generate a 440Hz tone (Generate &gt; Tone… &gt; Sine).</li><li>Play it. You’ll hear a pure tone.</li></ul></li><li>Now let’s add another tone.<ul><li>Make a new track (Tracks &gt; Add New &gt; Mono Track).</li><li>Generate an 880Hz tone in the new track. Same method as above.</li><li>Play it to hear a beautiful sounding octave.</li></ul></li></ul><p><a class="lightbox-single" title="The audacity of it all!" href="/img/posts/programming/digital-audio-synthesis/assets/audacity-2000w.webp"><img class="mb-2 rw center jw-100" src="/img/posts/programming/digital-audio-synthesis/assets/audacity-2000w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 2000 / 650" alt="Screenshot of Audacity with the 440 Hertz and 880 Hertz sine tone." title="The audacity of it all!" srcset="/img/posts/programming/digital-audio-synthesis/assets/audacity-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/audacity-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/audacity-1024w.webp 1024w, /img/posts/programming/digital-audio-synthesis/assets/audacity-2000w.webp 2000w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, (max-width: 1024px) 1024px, 2000px"></a></p><p>During playback, Audacity will combine the samples from both tracks by summing them and play the summed signal.</p><p>You can try layering other frequencies (554Hz, 659Hz) to play a nifty A Major chord.</p><h2 id="fundamental-frequency" tabindex="-1"><a class="md-anchor" href="#fundamental-frequency" aria-hidden="true"></a> Fundamental Frequency</h2><p>A side note. When combining two frequencies with additive synthesis, something subtle happens. The ground shifts and our feet fumble! The fundamental frequency implicitly changes!</p><div class="alert alert-success d-flex align-items-start"><i class="fas fa-lightbulb ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p><strong>DIY Example</strong></p><ol><li>Fire up Audacity.</li><li>Generate a 400Hz sine tone. (Generate &gt; Tone...)</li><li>Generate a 402Hz sine tone on a different track.</li><li>Play the audio and observe. How many times does the audio <abbr data-bs-placement="top" data-bs-toggle="tooltip" title="i.e. hit a maximum point">peak</abbr> per second?</li></ol><p>It peaks <span class="spoiler" tabindex="0">twice</span> per second. (That is, we implicitly added a <span class="spoiler" tabindex="0">2Hz</span> signal beneath!)</p></div></div><p>Specifically, the fundamental changes to the <strong>greatest common divisor</strong> (GCD) of the two frequencies.</p><p>More notes:</p><ul><li>When we play a note and its 5th (in <em>Just Temperament</em>), say 440Hz and 660Hz, our fundamental is 220Hz.</li><li>With octaves, the fundamental frequency is just the frequency of the lower note.</li><li>This also leads to some interesting phenomena.<ul><li>When we play two super-low-register notes a semitone apart, we get funny, dissonant pulses emanating from our keyboard or piano.</li><li>This may also lead to unpleasant buzzes when mixing synths, possibly due to frequency modulation on top of a steady tone.</li></ul></li></ul><h2 id="wavetable-synthesis" tabindex="-1"><a class="md-anchor" href="#wavetable-synthesis" aria-hidden="true"></a> Wavetable Synthesis 🌊</h2><p>In previous code blocks, we computed samples using <code>sin()</code>. But what if we wanted to compute something more complex? Do we really just reverse the Fourier theorem and apply additive synthesis on a bunch of sine signals? It turns out there's a better way.</p><p>A more efficient approach is to interpolate over <em>pre-generated values</em>, sacrificing a bit of memory for faster runtime performance. This is known as <strong>wavetable synthesis</strong> or <strong>table-lookup synthesis</strong>. The idea is to pre-generate one cycle of the wave (e.g. a sine) and store it in a lookup table. Then when generating samples for our audio, we would look up the pre-generated samples and derive intermediate values if necessary (via interpolation).</p><p>This is akin to preparing a cheat sheet for an exam, but you're only allowed to bring one sheet of paper—space is precious. You decide to only include the most crucial equations, key points, and references. Then when taking the exam you refer to the cheat sheet for ideas, connect the dots, and combine them with your thoughts to form an answer.</p><div class="mb-2 rw center jw-75 video"><video autoplay loop muted class="jw-100"><source src="/img/wavetable-synthesis.mp4" type="video/mp4"></video></div><p class="caption"><sup>Example of wavetable synthesis. The blue dots (above) show a pre-generated wavetable of length 32. The red dots (below) are samples of a 8Hz sine wave sampled at 100Hz, generated by interpolating on the wavetable. (<a href="https://gist.github.com/TrebledJ/f42f9030d1bee0ece8af7fc0db5d0151" rel="noreferrer" target="_blank">Source Code</a>)</sup></p><p>Wavetable synthesis can be implemented in C++ like so:</p><div class="code-toolbar"><pre class="language-cpp" tabindex="0"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SINE_WAVETABLE_SIZE</span> <span class="token expression"><span class="token number">256</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SAMPLE_RATE</span> <span class="token expression"><span class="token number">44100</span>  </span><span class="token comment">// Number of samples per second (of the target waveform).</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BUFFER_SIZE</span> <span class="token expression"><span class="token number">1024</span></span></span>

<span class="token comment">// The pre-generated wavetable. It should capture one cycle of the desired waveform (in this case, a sine).</span>
<span class="token keyword">float</span> sine_wavetable<span class="token punctuation">[</span>SINE_WAVETABLE_SIZE<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* pre-generated values ... */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// The phase indicates how far along the wavetable we are.</span>
<span class="token comment">// We're concerned with two components: the integer and decimal.</span>
<span class="token comment">// The integer part indicates the index of left sample along the wavetable, modulus the size.</span>
<span class="token comment">// The decimal part indicates the fraction between the left and right samples.</span>
<span class="token keyword">float</span> phase <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">float</span> buffer<span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Generate samples of a sine wave by interpolating a wavetable.
 * @param freq  Frequency of the sine wave, in Hz.
 */</span>
<span class="token keyword">float</span> <span class="token function">get_next_sample</span><span class="token punctuation">(</span><span class="token keyword">float</span> freq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    size_t idx <span class="token operator">=</span> <span class="token function">size_t</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Integer part.</span>
    <span class="token keyword">float</span> frac <span class="token operator">=</span> phase <span class="token operator">-</span> idx<span class="token punctuation">;</span>   <span class="token comment">// Decimal part.</span>

    <span class="token comment">// Get the pre-generated sample to the LEFT of the current sample.</span>
    <span class="token keyword">float</span> samp0 <span class="token operator">=</span> sine_wavetable<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Get the pre-generated sample to the RIGHT of the current sample.</span>
    idx <span class="token operator">=</span> <span class="token punctuation">(</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> SINE_WAVETABLE_SIZE<span class="token punctuation">;</span>
    <span class="token keyword">float</span> samp1 <span class="token operator">=</span> sine_wavetable<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Interpolate between the left and right samples to get the current sample.</span>
    <span class="token keyword">float</span> inter <span class="token operator">=</span> <span class="token punctuation">(</span>samp0 <span class="token operator">+</span> <span class="token punctuation">(</span>samp1 <span class="token operator">-</span> samp0<span class="token punctuation">)</span> <span class="token operator">*</span> frac<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Advance the phase to prepare for the next sample.</span>
    phase <span class="token operator">+=</span> SINE_WAVETABLE_SIZE <span class="token operator">*</span> freq <span class="token operator">/</span> SAMPLE_RATE<span class="token punctuation">;</span>

    <span class="token keyword">return</span> inter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">generate_samples_w</span><span class="token punctuation">(</span><span class="token keyword">float</span> freq<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> BUFFER_SIZE<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        buffer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">get_next_sample</span><span class="token punctuation">(</span>freq<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// We've offloaded the calculations to `get_next_sample`.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><div class="toolbar"><div class="toolbar-item"><span class="lang">C++</span></div><div class="toolbar-item"><button class="copy-to-clipboard-button" type="button" title="Copy Code"></button></div></div></div><p>For a sine wave, we don't gain much in terms of performance. But when it comes to generating complex waveforms, wavetable synthesis rocks!<sup class="footnote-ref"><a href="#fn2" id="fnref2">2</a></sup></p><div class="alert alert-info d-flex align-items-start"><i class="fas fa-bolt ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>Wavetable synthesis is commonly used by <abbr data-bs-placement="top" data-bs-toggle="tooltip" title="a protocol for music">MIDI</abbr> to generate sounds. Each instrument has its own <em>soundfont</em>, which is a collection of wavetables of different pitches. This unifies the synthesis approach for all instruments, as some may be simple to generate (e.g. clarinet) while others are more complex.</p></div></div><div class="alert alert-success d-flex align-items-start"><i class="fas fa-lightbulb ms-1 me-3 mt-1 fs-4" role="img"></i><div class="alert-content flex-fill mt-0"><p>Additive synthesis and wavetable synthesis serve two very different purposes!</p><ul><li>Additive synthesis aims to <em>combine multiple waveforms</em>, of <em>any</em> shape and size (e.g. playing chords, or combining guitar and voice tracks).</li><li>Wavetable synthesis aims to generate a <em>specific</em> waveform (in a fast manner).</li></ul></div></div><p>Besides this software approach, we can also leverage hardware to speed up processing. But this is a matter for the next post.</p><p>Exercise for the reader:</p><ul><li>What variables affect the speed at which we iterate through the pre-generated wavetable?</li><li>What happens if we try to generate a waveform with frequency equal to half the sample rate? Or with frequency equal <em>to</em> the sample rate itself?</li></ul><h2 id="recap" tabindex="-1"><a class="md-anchor" href="#recap" aria-hidden="true"></a> Recap 🔁</h2><p>Audio generation is pretty fun once we dive deep, as are its applications: toys, electronic instruments, virtual instruments, digital synths, speakers, hearing aids, and whatnot. As before, I hope we communicated on the same wavelength and the information on this post did not experience aliasing. 😏</p><p>In the <a href="/posts/digital-audio-synthesis-for-dummies-part-3">next post</a>, we'll dive even deeper into audio synthesis (particularly in embedded systems) and engineer a simple tone generator.</p><p>To recap…</p><ul><li>Audio samples may come from several sources. It may be recorded, loaded from a file, or <a href="#audio-synthesis">synthesised</a>.</li><li>We can synthesise musical pitches by <a href="#buffering">buffering</a> samples and feeding them to hardware.</li><li>According to the <a href="#the-fourier-theorem">Fourier Theorem</a>, all signals can be broken into a summation of sine waves.</li><li>To combine audio signals, we can apply <a href="#additive-synthesis">additive synthesis</a>.<ul><li>This also allows us to play multiple pitches simultaneously (chords).</li></ul></li><li>We can generate complex waveforms by using <a href="#wavetable-synthesis">wavetable synthesis</a>, which trades memory for speed by sampling pre-generated signals.</li></ul><p>Further Reading:</p><ul><li>Waveforms (Sine, Square, Triangle, Sawtooth)<ul><li>Most audio synthesis tutorials cover simple waveforms; but as internet content is saturated here, I'll just drop a couple links. I couldn't find an article I like that introduces these waveforms in all their glory. If you know of better articles, let me know.</li><li><a href="https://www.perfectcircuit.com/signal/difference-between-waveforms" rel="noreferrer" target="_blank">Perfect Circuit</a> (conceptual, high-level)</li><li><a href="https://www.electronics-tutorials.ws/waveforms/waveforms.html" rel="noreferrer" target="_blank">Electronics Tutorial</a> (geared towards electronics; would be a nice read to prepare for the <a href="/posts/digital-audio-synthesis-for-dummies-part-3">next post</a>)</li></ul></li><li><a href="https://musictech.com/guides/essential-guide/beginners-guide-to-synthesis-in-music-production/" rel="noreferrer" target="_blank">Beginner’s Guide: Everything you need to know about synthesis in music production</a> – Introduces more forms of audio synthesis, geared towards music production.</li></ul><hr class="footnotes-sep"><b>Footnotes</b><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Boy, do I have a lot to say about buffers. Why is the buffer size important? Small buffers may reduce the efficacy of batching operations (which is the primary purpose of buffers). Large buffers may block the processor too much, making it sluggish to respond to new input. Choosing an appropriate buffer size also depends on your sampling rate. With a buffer size of 1024 sampling at 44100Hz, we would need to generate our samples every $\frac{1024}{44.1\text{kHz}} \approx 23.2$ ms. On a single processor, this means we have <em>less than</em> 23.2 ms to perform other tasks (e.g. handle UI, events, etc.). <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>Guess what? There are more ways to optimise wavetable synthesis—so it'll rock even more! See the open source <a href="https://github.com/spiricom/LEAF/blob/a0b0b7915cce3792ea00f06d0a6861be1a73d609/leaf/Src/leaf-oscillators.c#L67" rel="noreferrer" target="_blank">LEAF</a> library for an example of optimised wavetable synthesis in C. <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section></div><a id="end-of-article"></a><br><script defer src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><div class="post-share dim-gentle mb-3 d-flex flex-row align-items-center"><div class="d-flex flex-row flex-wrap align-items-center gap-3"><span>Share&nbsp;on</span> <a class="no-decoration" data-sharer="reddit" data-title="Digital Audio Synthesis for Dummies: Part&amp;nbsp;2" data-url="/posts/digital-audio-synthesis-for-dummies-part-2/"><span class="fs-4"><i class="fab fa-reddit"></i> </span></a><a class="no-decoration" data-sharer="telegram" data-title="Digital Audio Synthesis for Dummies: Part&amp;nbsp;2" data-url="/posts/digital-audio-synthesis-for-dummies-part-2/"><span class="fs-4"><i class="fab fa-telegram"></i> </span></a><a class="no-decoration" data-sharer="whatsapp" data-title="Digital Audio Synthesis for Dummies: Part&amp;nbsp;2" data-url="/posts/digital-audio-synthesis-for-dummies-part-2/"><span class="fs-4"><i class="fab fa-whatsapp"></i> </span></a><a class="no-decoration" data-sharer="linkedin" data-title="Digital Audio Synthesis for Dummies: Part&amp;nbsp;2" data-url="/posts/digital-audio-synthesis-for-dummies-part-2/"><span class="fs-4"><i class="fab fa-linkedin"></i> </span></a><a class="no-decoration" data-sharer="vk" data-title="Digital Audio Synthesis for Dummies: Part&amp;nbsp;2" data-url="/posts/digital-audio-synthesis-for-dummies-part-2/"><span class="fs-4"><i class="fab fa-vk"></i> </span></a><a class="no-decoration" data-sharer="twitter" data-title="Digital Audio Synthesis for Dummies: Part&amp;nbsp;2" data-url="/posts/digital-audio-synthesis-for-dummies-part-2/"><span class="fs-4"><i class="fab fa-twitter"></i> </span></a><a id="copy-link-button" class="no-decoration" data-bs-toggle="tooltip" data-bs-trigger="click" title="Link copied!"><span class="fs-4"><i class="fas fa-link"></i></span></a></div></div><hr><div id="post-author-container" class="d-flex justify-content-between align-items-center gap-3" itemprop="author" itemscope itemtype="https://schema.org/Person"><img src="/img/profile-icon.jpg" class="profile-img" alt="" loading="lazy" decoding="async" itemprop="image"><div class="author-info d-flex flex-column gap-1"><p class="profile-name" itemprop="name">TrebledJ</p><p class="profile-bio" itemprop="description">Passionate problem-solver, pentester, and autodidact. I thrive on learning new things and enjoy passing it on. When not immersed in bughunting or programming, I can be found taking walks, composing a short tune, and occasionally indulging in CTF challenges.</p></div></div><hr class="section-sep"><div id="related" class="jw-100"><h3><i class="fas fa-circle-nodes me-2"></i>Related Posts</h3><div class="row gx-3 mt-4"><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/digital-audio-synthesis-for-dummies-part-1/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/digital-audio-synthesis-for-dummies-part-1/"><img class="post-img-blurred-bg" src="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 398" alt="Thumbnail for Digital Audio Synthesis for Dummies: Part&nbsp;1" srcset="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-1024w.webp 1024w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 398" alt="Thumbnail for Digital Audio Synthesis for Dummies: Part&nbsp;1" srcset="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-1-1024w.webp 1024w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Digital Audio Synthesis for Dummies: Part&nbsp;1</h2><div class="post-summary"><p>An introductory discourse on audio processing. What makes audio tick?</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/tutorial/" itemprop="keywords">tutorial</a> </span><span><a class="jtag" href="/tags/dsp/" itemprop="keywords">dsp</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/digital-audio-synthesis-for-dummies-part-3/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/digital-audio-synthesis-for-dummies-part-3/"><img class="post-img-blurred-bg" src="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 398" alt="Thumbnail for Digital Audio Synthesis for Dummies: Part&nbsp;3" srcset="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-1024w.webp 1024w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 398" alt="Thumbnail for Digital Audio Synthesis for Dummies: Part&nbsp;3" srcset="/img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-256w.webp 256w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-512w.webp 512w, /img/posts/programming/digital-audio-synthesis/assets/synthwave-a-major-space-3-1024w.webp 1024w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">Digital Audio Synthesis for Dummies: Part&nbsp;3</h2><div class="post-summary"><p>Efficiently streaming audio to speakers on embedded systems (with examples in STM32).</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/programming/" itemprop="keywords">programming</a> </span><span><a class="jtag" href="/tags/tutorial/" itemprop="keywords">tutorial</a> </span><span><a class="jtag" href="/tags/dsp/" itemprop="keywords">dsp</a></span></div></div></div></div></article></div><div class="related-col-flex-auto-4"><article class="post-minified-preview"><a href="/posts/stm32-midi-keyboard/"></a><div class="d-flex flex-column"><a class="post-thumbnail" href="/posts/stm32-midi-keyboard/"><img class="post-img-blurred-bg" src="/img/posts/projects/05-midi-keyboard/assets/midi-keyboard-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 269" alt="Thumbnail for STM32 MIDI Keyboard" srcset="/img/posts/projects/05-midi-keyboard/assets/midi-keyboard-256w.webp 256w, /img/posts/projects/05-midi-keyboard/assets/midi-keyboard-512w.webp 512w, /img/posts/projects/05-midi-keyboard/assets/midi-keyboard-1024w.webp 1024w, /img/posts/projects/05-midi-keyboard/assets/midi-keyboard-1384w.webp 1384w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"><div class="post-img-container d-flex jw-100 h-100"><img class="post-img-contain" src="/img/posts/projects/05-midi-keyboard/assets/midi-keyboard-512w.webp" loading="lazy" decoding="async" style="aspect-ratio: auto 512 / 269" alt="Thumbnail for STM32 MIDI Keyboard" srcset="/img/posts/projects/05-midi-keyboard/assets/midi-keyboard-256w.webp 256w, /img/posts/projects/05-midi-keyboard/assets/midi-keyboard-512w.webp 512w, /img/posts/projects/05-midi-keyboard/assets/midi-keyboard-1024w.webp 1024w, /img/posts/projects/05-midi-keyboard/assets/midi-keyboard-1384w.webp 1384w" sizes="(max-width: 256px) 256px, (max-width: 512px) 512px, 512px"></div></a><div class="post-content d-flex flex-column justify-content-between"><div><h2 class="post-title">STM32 MIDI Keyboard</h2><div class="post-summary"><p>Boing boing plunk plunk. Constructing a MIDI keyboard from scratch.</p></div></div><div class="metadata-tag-container d-flex flex-row align-items-top"><div class="tag-list mt-2 d-flex flex-row flex-wrap align-items-center"><span><a class="jtag" href="/tags/project/" itemprop="keywords">project</a> </span><span><a class="jtag" href="/tags/embedded/" itemprop="keywords">embedded</a> </span><span><a class="jtag" href="/tags/cpp/" itemprop="keywords">cpp</a></span></div></div></div></div></article></div></div><hr><h3><i class="fas fa-tags me-2"></i>Related Tags</h3><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to audio-synthesis-for-dummies">software.embedded</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/embedded/">embedded</a> <a class="jtag" href="/tags/audio-synthesis-for-dummies/">audio-synthesis-for-dummies</a> <a class="jtag" href="/tags/esp32/">esp32</a> <a class="jtag" href="/tags/iot/">iot</a> <a class="jtag" href="/tags/robotics/">robotics</a> <a class="jtag" href="/tags/stm32/">stm32</a></span></div><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to c, cpp">software.programming-language</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/cpp/">cpp</a> <a class="jtag" href="/tags/python/">python</a> <a class="jtag" href="/tags/c/">c</a> <a class="jtag" href="/tags/haskell/">haskell</a> <a class="jtag" href="/tags/js/">js</a> <a class="jtag" href="/tags/qt/">qt</a> <a class="jtag" href="/tags/rust/">rust</a> <a class="jtag" href="/tags/qml/">qml</a> <a class="jtag" href="/tags/sql/">sql</a> <a class="jtag" href="/tags/scala/">scala</a></span></div><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to dsp, programming">software.general</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/programming/">programming</a> <a class="jtag" href="/tags/software-engineering/">software-engineering</a> <a class="jtag" href="/tags/web/">web</a> <a class="jtag" href="/tags/aoc/">aoc</a> <a class="jtag" href="/tags/apps/">apps</a> <a class="jtag" href="/tags/dsp/">dsp</a> <a class="jtag" href="/tags/programming-languages/">programming-languages</a> <a class="jtag" href="/tags/linux/">linux</a> <a class="jtag" href="/tags/performance/">performance</a> <a class="jtag" href="/tags/functional/">functional</a> <a class="jtag" href="/tags/types/">types</a> <a class="jtag" href="/tags/windows/">windows</a> <a class="jtag" href="/tags/ai/">ai</a> <a class="jtag" href="/tags/metaprogramming/">metaprogramming</a> <a class="jtag" href="/tags/oop/">oop</a></span></div><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to music, synths">music.general</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/music/">music</a> <a class="jtag" href="/tags/composition/">composition</a> <a class="jtag" href="/tags/synths/">synths</a> <a class="jtag" href="/tags/piano/">piano</a> <a class="jtag" href="/tags/strings/">strings</a> <a class="jtag" href="/tags/song/">song</a></span></div><div class="mt-3"><h4><abbr data-bs-placement="top" data-bs-toggle="tooltip" title="Related to notes, tutorial">misc</abbr></h4><span class="d-flex flex-wrap"><a class="jtag" href="/tags/writeup/">writeup</a> <a class="jtag" href="/tags/notes/">notes</a> <a class="jtag" href="/tags/tutorial/">tutorial</a> <a class="jtag" href="/tags/reflection/">reflection</a> <a class="jtag" href="/tags/hkust/">hkust</a> <a class="jtag" href="/tags/project/">project</a> <a class="jtag" href="/tags/experience/">experience</a> <a class="jtag" href="/tags/faith/">faith</a> <a class="jtag" href="/tags/meta/">meta</a> <a class="jtag" href="/tags/learning/">learning</a> <a class="jtag" href="/tags/mathematics/">mathematics</a> <a class="jtag" href="/tags/cheatsheet/">cheatsheet</a> <a class="jtag" href="/tags/research/">research</a> <a class="jtag" href="/tags/satire/">satire</a> <a class="jtag" href="/tags/essay/">essay</a> <a class="jtag" href="/tags/reading/">reading</a></span></div></div><hr class="section-sep"><div class="container-md mt-4 p-4"><a id="comments"></a><p><em>Comments are back! Privacy-focused, without ads, bloatware 🤮, and trackers. Be one of the first to contribute to the discussion — I'd love to hear your thoughts.</em></p><script defer src="https://trebledj.me/js/comentario.min.js"></script><comentario-comments id="comentario" auto-init="false" no-fonts="true" css-override="false" theme="dark"></comentario-comments></div><br></div></div></article></div></div></div><footer class="d-flex flex-column gap-2"><div class="d-flex flex-row gap-3 mx-auto" style="width:fit-content;"><a rel="me noreferrer" href="https://github.com/TrebledJ" target="_blank"><i class="social-icon fab fa-github" style="color:rgb(150, 60, 180) !important;"></i> </a><a rel="me noreferrer" href="https://stackoverflow.com/users/10239789/trebledj" target="_blank"><i class="social-icon fab fa-stack-overflow" style="color:rgb(236, 124, 34) !important;"></i> </a><a rel="me noreferrer" href="https://www.codingame.com/profile/8444100ecb9723c1ec542346b0630aaa2821532" target="_blank"><i class="social-icon d-flex flex-column"><img src="/img/logos/codingame.webp" alt="" loading="lazy" decoding="async"></i></a><a rel="me noreferrer" href="https://soundcloud.com/trebledj" target="_blank"><i class="social-icon fab fa-soundcloud" style="color:rgb(237, 110, 30) !important;"></i> </a><a rel="me noreferrer" href="https://musescore.com/user/20636901" target="_blank"><i class="social-icon d-flex flex-column"><img src="/img/logos/musescore.webp" alt="" loading="lazy" decoding="async"></i></a><a rel="me noreferrer" href="https://discordapp.com/users/220427982798454794" target="_blank"><i class="social-icon fab fa-discord" style="color:rgb(84, 100, 235) !important;"></i> </a><a rel="me" href="mailto:trebledjjj@gmail.com"><i class="social-icon fas fa-envelope"></i> </a><a rel="me" href="/feeds"><i class="social-icon fas fa-square-rss"></i></a></div><p>Copyright&nbsp;©&nbsp;2025&nbsp;TrebledJ • <a href="/privacy-policy">Privacy&nbsp;Policy</a> • <a href="https://github.com/TrebledJ/trebledj.github.io?tab=readme-ov-file#credits--appreciation" rel="noreferrer" target="_blank">Credits</a></p></footer><script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js"></script><script>var tocOptions={}</script><script defer src="/cb/MPnrKnjI5w.js"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" rel="stylesheet" media="print"><script>document.querySelectorAll('link[media|="print"]').forEach(e=>{e.addEventListener("load",()=>e.media="all"),e.sheet&&(e.media="all")})</script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!0})})</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;52d99b3d385b4c9a98ac8ad109a95a2a&quot;}"></script></body></html>